/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function At(i){var s=typeof Symbol=="function"&&Symbol.iterator,t=s&&i[s],e=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&e>=i.length&&(i=void 0),{value:i&&i[e++],done:!i}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}function Kt(i,s){var t=typeof Symbol=="function"&&i[Symbol.iterator];if(!t)return i;var e=t.call(i),r,n=[],o;try{for(;(s===void 0||s-- >0)&&!(r=e.next()).done;)n.push(r.value)}catch(a){o={error:a}}finally{try{r&&!r.done&&(t=e.return)&&t.call(e)}finally{if(o)throw o.error}}return n}function qe(){for(var i=[],s=0;s<arguments.length;s++)i=i.concat(Kt(arguments[s]));return i}var be=function(i){return typeof i>"u"},Ye=(function(){function i(t,e){var r,n;if(this._canceled=!1,e)try{for(var o=At(Object.keys(e)),a=o.next();!a.done;a=o.next()){var u=a.value;this[u]=e[u]}}catch(l){r={error:l}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}this.eventType=t}var s=i.prototype;return s.stop=function(){this._canceled=!0},s.isCanceled=function(){return this._canceled},i})(),ve=(function(){function i(){this._eventHandler={}}var s=i.prototype;return s.trigger=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=t instanceof Ye?t.eventType:t,o=qe(this._eventHandler[n]||[]);return o.length<=0?this:(t instanceof Ye?(t.currentTarget=this,o.forEach(function(a){a(t)})):o.forEach(function(a){a.apply(void 0,qe(e))}),this)},s.once=function(t,e){var r=this;if(typeof t=="object"&&be(e)){var n=t;for(var o in n)this.once(o,n[o]);return this}else if(typeof t=="string"&&typeof e=="function"){var a=function(){for(var u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];e.apply(void 0,qe(u)),r.off(t,a)};this.on(t,a)}return this},s.hasOn=function(t){return!!this._eventHandler[t]},s.on=function(t,e){if(typeof t=="object"&&be(e)){var r=t;for(var n in r)this.on(n,r[n]);return this}else if(typeof t=="string"&&typeof e=="function"){var o=this._eventHandler[t];be(o)&&(this._eventHandler[t]=[],o=this._eventHandler[t]),o.push(e)}return this},s.off=function(t,e){if(be(t))return this._eventHandler={},this;if(be(e)){if(typeof t=="string")return delete this._eventHandler[t],this;var r=t;for(var n in r)this.off(n,r[n]);return this}var o=this._eventHandler[t];if(o){for(var a=o.length,u=0;u<a;++u)if(o[u]===e){o.splice(u,1),a<=1&&delete this._eventHandler[t];break}}return this},i.VERSION="3.0.5",i})(),ce=Ye,Vt=(function(){function i(){this.keys=[],this.values=[]}var s=i.prototype;return s.get=function(t){return this.values[this.keys.indexOf(t)]},s.set=function(t,e){var r=this.keys,n=this.values,o=r.indexOf(t),a=o===-1?r.length:o;r[a]=t,n[a]=e},i})(),Ut=(function(){function i(){this.object={}}var s=i.prototype;return s.get=function(t){return this.object[t]},s.set=function(t,e){this.object[t]=e},i})(),jt=typeof Map=="function",qt=(function(){function i(){}var s=i.prototype;return s.connect=function(t,e){this.prev=t,this.next=e,t&&(t.next=this),e&&(e.prev=this)},s.disconnect=function(){var t=this.prev,e=this.next;t&&(t.next=e),e&&(e.prev=t)},s.getIndex=function(){for(var t=this,e=-1;t;)t=t.prev,++e;return e},i})();function Bt(i,s){var t=[],e=[];return i.forEach(function(r){var n=r[0],o=r[1],a=new qt;t[n]=a,e[o]=a}),t.forEach(function(r,n){r.connect(t[n-1])}),i.filter(function(r,n){return!s[n]}).map(function(r,n){var o=r[0],a=r[1];if(o===a)return[0,0];var u=t[o],l=e[a-1],c=u.getIndex();u.disconnect(),l?u.connect(l,l.next):u.connect(void 0,t[0]);var h=u.getIndex();return[c,h]})}var Ht=(function(){function i(t,e,r,n,o,a,u,l){this.prevList=t,this.list=e,this.added=r,this.removed=n,this.changed=o,this.maintained=a,this.changedBeforeAdded=u,this.fixed=l}var s=i.prototype;return Object.defineProperty(s,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(s,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),s.caculateOrdered=function(){var t=Bt(this.changedBeforeAdded,this.fixed),e=this.changed,r=[];this.cacheOrdered=t.filter(function(n,o){var a=n[0],u=n[1],l=e[o],c=l[0],h=l[1];if(a!==u)return r.push([c,h]),!0}),this.cachePureChanged=r},i})();function je(i,s,t){var e=jt?Map:t?Ut:Vt,r=t||function(y){return y},n=[],o=[],a=[],u=i.map(r),l=s.map(r),c=new e,h=new e,f=[],d=[],p={},v=[],g=0,R=0;return u.forEach(function(y,z){c.set(y,z)}),l.forEach(function(y,z){h.set(y,z)}),u.forEach(function(y,z){var b=h.get(y);typeof b>"u"?(++R,o.push(z)):p[b]=R}),l.forEach(function(y,z){var b=c.get(y);typeof b>"u"?(n.push(z),++g):(a.push([b,z]),R=p[z]||0,f.push([b-R,z-g]),d.push(z===b),b!==z&&v.push([b,z]))}),o.reverse(),new Ht(i,s,n,o,v,a,f,d)}var Ft=typeof Map=="function"?void 0:(function(){var i=0;return function(s){return s.__DIFF_KEY__||(s.__DIFF_KEY__=++i)}})();function gt(i,s){return je(i,s,Ft)}var $e=function(i,s){return $e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},$e(i,s)};function ze(i,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");$e(i,s);function t(){this.constructor=i}i.prototype=s===null?Object.create(s):(t.prototype=s.prototype,new t)}var Ce=function(){return Ce=Object.assign||function(s){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(s[n]=t[n])}return s},Ce.apply(this,arguments)};function Wt(){for(var i=0,s=0,t=arguments.length;s<t;s++)i+=arguments[s].length;for(var e=Array(i),r=0,s=0;s<t;s++)for(var n=arguments[s],o=0,a=n.length;o<a;o++,r++)e[r]=n[o];return e}var rt=typeof window<"u",Yt=rt?window.navigator.userAgent:"",$t=rt?"getComputedStyle"in window:!1,Zt=/MSIE|Trident|Windows Phone|Edge/.test(Yt),Xt=rt?"addEventListener"in document:!1,Ze="width",Te="height";function Ae(i,s){return i.getAttribute(s)||""}function Ve(i){return[].slice.call(i)}function Qt(i,s){return s===void 0&&(s="data-"),!!i.getAttribute(s+"width")}function mt(i,s){return s===void 0&&(s="data-"),"loading"in i&&i.getAttribute("loading")==="lazy"||!!i.getAttribute(s+"lazy")}function Jt(i,s){return s===void 0&&(s="data-"),!!i.getAttribute(s+"skip")}function yt(i,s,t){Xt?i.addEventListener(s,t,!1):i.attachEvent?i.attachEvent("on"+s,t):i["on"+s]=t}function Rt(i,s,t){i.removeEventListener?i.removeEventListener(s,t,!1):i.detachEvent?i.detachEvent("on"+s,t):i["on"+s]=null}function er(i){return _t(i,"Width")}function tr(i){return _t(i,"Height")}function rr(i){return($t?window.getComputedStyle(i):i.currentStyle)||{}}function _t(i,s){var t=i["client"+s]||i["offset"+s];return parseFloat(t||rr(i)[s.toLowerCase()])||0}function nr(i,s,t){var e=Ve(i.querySelectorAll(Wt(["["+t+"skip] ["+t+"width]"],s.map(function(r){return["["+t+"skip] "+r,r+"["+t+"skip]","["+t+"width] "+r].join(", ")})).join(", ")));return Ve(i.querySelectorAll("["+t+"width], "+s.join(", "))).filter(function(r){return e.indexOf(r)===-1})}var Se=[];function It(i,s){!Se.length&&yt(window,"resize",Ct),i.__PREFIX__=s,Se.push(i),St(i)}function ir(i,s){var t=Se.indexOf(i);if(!(t<0)){var e=Ae(i,s+"fixed");delete i.__PREFIX__,i.style[e===Te?Ze:Te]="",Se.splice(t,1),!Se.length&&Rt(window,"resize",Ct)}}function St(i,s){s===void 0&&(s="data-");var t=i.__PREFIX__||s,e=parseInt(Ae(i,""+t+Ze),10)||0,r=parseInt(Ae(i,""+t+Te),10)||0,n=Ae(i,t+"fixed");if(n===Te){var o=tr(i)||r;i.style[Ze]=e/r*o+"px"}else{var o=er(i)||e;i.style[Te]=r/e*o+"px"}}function Ct(){Se.forEach(function(i){St(i)})}var nt=(function(i){ze(s,i);function s(e,r){r===void 0&&(r={});var n=i.call(this)||this;n.isReady=!1,n.isPreReady=!1,n.hasDataSize=!1,n.hasLoading=!1,n.isSkip=!1,n.onCheck=function(a){n.clear(),a&&a.type==="error"&&n.onError(n.element),!(n.hasLoading&&n.checkElement())&&n.onReady()},n.options=Ce({prefix:"data-"},r),n.element=e;var o=n.options.prefix;return n.hasDataSize=Qt(e,o),n.isSkip=Jt(e,o),n.hasLoading=mt(e,o),n}var t=s.prototype;return t.check=function(){return this.isSkip||!this.checkElement()?(this.onAlreadyReady(),!1):(this.hasDataSize&&It(this.element,this.options.prefix),(this.hasDataSize||this.hasLoading)&&this.onAlreadyPreReady(),!0)},t.addEvents=function(){var e=this,r=this.element;this.constructor.EVENTS.forEach(function(n){yt(r,n,e.onCheck)})},t.clear=function(){var e=this,r=this.element;this.constructor.EVENTS.forEach(function(n){Rt(r,n,e.onCheck)}),this.removeAutoSizer()},t.destroy=function(){this.clear(),this.off()},t.removeAutoSizer=function(){if(this.hasDataSize){var e=this.options.prefix;ir(this.element,e)}},t.onError=function(e){this.trigger("error",{element:this.element,target:e})},t.onPreReady=function(){this.isPreReady||(this.isPreReady=!0,this.trigger("preReady",{element:this.element,hasLoading:this.hasLoading,isSkip:this.isSkip}))},t.onReady=function(){var e=this.isPreReady;this.isPreReady=!0,!this.isReady&&(this.removeAutoSizer(),this.isReady=!0,this.trigger("ready",{element:this.element,withPreReady:!e,hasLoading:this.hasLoading,isSkip:this.isSkip}))},t.onAlreadyError=function(e){var r=this;setTimeout(function(){r.onError(e)})},t.onAlreadyPreReady=function(){var e=this;setTimeout(function(){e.onPreReady()})},t.onAlreadyReady=function(){var e=this;setTimeout(function(){e.onReady()})},s.EVENTS=[],s})(ve),sr=(function(i){ze(s,i);function s(){return i!==null&&i.apply(this,arguments)||this}var t=s.prototype;return t.setHasLoading=function(e){this.hasLoading=e},t.check=function(){return this.isSkip?(this.onAlreadyReady(),!1):(this.hasDataSize?(It(this.element,this.options.prefix),this.onAlreadyPreReady()):this.trigger("requestChildren"),!0)},t.checkElement=function(){return!0},t.destroy=function(){this.clear(),this.trigger("requestDestroy"),this.off()},t.onAlreadyPreReady=function(){i.prototype.onAlreadyPreReady.call(this),this.trigger("reqeustReadyChildren")},s.EVENTS=[],s})(nt),or=(function(i){ze(s,i);function s(e){e===void 0&&(e={});var r=i.call(this)||this;return r.readyCount=0,r.preReadyCount=0,r.totalCount=0,r.totalErrorCount=0,r.isPreReadyOver=!0,r.elementInfos=[],r.options=Ce({loaders:{},prefix:"data-"},e),r}var t=s.prototype;return t.check=function(e){var r=this,n=this.options.prefix;this.clear(),this.elementInfos=Ve(e).map(function(a,u){var l=r.getLoader(a,{prefix:n});return l.check(),l.on("error",function(c){r.onError(u,c.target)}).on("preReady",function(c){var h=r.elementInfos[u];h.hasLoading=c.hasLoading,h.isSkip=c.isSkip;var f=r.checkPreReady(u);r.onPreReadyElement(u),f&&r.onPreReady()}).on("ready",function(c){var h=c.withPreReady,f=c.hasLoading,d=c.isSkip,p=r.elementInfos[u];p.hasLoading=f,p.isSkip=d;var v=h&&r.checkPreReady(u),g=r.checkReady(u);h&&r.onPreReadyElement(u),r.onReadyElement(u),v&&r.onPreReady(),g&&r.onReady()}),{loader:l,element:a,hasLoading:!1,hasError:!1,isPreReady:!1,isReady:!1,isSkip:!1}});var o=this.elementInfos.length;return this.totalCount=o,o||setTimeout(function(){r.onPreReady(),r.onReady()}),this},t.getTotalCount=function(){return this.totalCount},t.isPreReady=function(){return this.elementInfos.every(function(e){return e.isPreReady})},t.isReady=function(){return this.elementInfos.every(function(e){return e.isReady})},t.hasError=function(){return this.totalErrorCount>0},t.clear=function(){this.isPreReadyOver=!1,this.totalCount=0,this.preReadyCount=0,this.readyCount=0,this.totalErrorCount=0,this.elementInfos.forEach(function(e){e.loader&&e.loader.destroy()}),this.elementInfos=[]},t.destroy=function(){this.clear(),this.off()},t.getLoader=function(e,r){var n=this,o=e.tagName.toLowerCase(),a=this.options.loaders,u=r.prefix,l=Object.keys(a);if(a[o])return new a[o](e,r);var c=new sr(e,r),h=Ve(e.querySelectorAll(l.join(", ")));c.setHasLoading(h.some(function(d){return mt(d,u)}));var f=this.clone().on("error",function(d){c.onError(d.target)}).on("ready",function(){c.onReady()});return c.on("requestChildren",function(){var d=nr(e,l,n.options.prefix);f.check(d).on("preReady",function(p){p.isReady||c.onPreReady()})}).on("reqeustReadyChildren",function(){f.check(h)}).on("requestDestroy",function(){f.destroy()}),c},t.clone=function(){return new s(Ce({},this.options))},t.checkPreReady=function(e){return this.elementInfos[e].isPreReady=!0,++this.preReadyCount,!(this.preReadyCount<this.totalCount)},t.checkReady=function(e){return this.elementInfos[e].isReady=!0,++this.readyCount,!(this.readyCount<this.totalCount)},t.onError=function(e,r){var n=this.elementInfos[e];n.hasError=!0,this.trigger(new ce("error",{element:n.element,index:e,target:r,errorCount:this.getErrorCount(),totalErrorCount:++this.totalErrorCount}))},t.onPreReadyElement=function(e){var r=this.elementInfos[e];this.trigger(new ce("preReadyElement",{element:r.element,index:e,preReadyCount:this.preReadyCount,readyCount:this.readyCount,totalCount:this.totalCount,isPreReady:this.isPreReady(),isReady:this.isReady(),hasLoading:r.hasLoading,isSkip:r.isSkip}))},t.onPreReady=function(){this.isPreReadyOver=!0,this.trigger(new ce("preReady",{readyCount:this.readyCount,totalCount:this.totalCount,isReady:this.isReady(),hasLoading:this.hasLoading()}))},t.onReadyElement=function(e){var r=this.elementInfos[e];this.trigger(new ce("readyElement",{index:e,element:r.element,hasError:r.hasError,errorCount:this.getErrorCount(),totalErrorCount:this.totalErrorCount,preReadyCount:this.preReadyCount,readyCount:this.readyCount,totalCount:this.totalCount,isPreReady:this.isPreReady(),isReady:this.isReady(),hasLoading:r.hasLoading,isPreReadyOver:this.isPreReadyOver,isSkip:r.isSkip}))},t.onReady=function(){this.trigger(new ce("ready",{errorCount:this.getErrorCount(),totalErrorCount:this.totalErrorCount,totalCount:this.totalCount}))},t.getErrorCount=function(){return this.elementInfos.filter(function(e){return e.hasError}).length},t.hasLoading=function(){return this.elementInfos.some(function(e){return e.hasLoading})},s})(ve),ar=(function(i){ze(s,i);function s(){return i!==null&&i.apply(this,arguments)||this}var t=s.prototype;return t.checkElement=function(){var e=this.element,r=e.getAttribute("src");if(e.complete){if(r)return e.naturalWidth||this.onAlreadyError(e),!1;this.onAlreadyPreReady()}return this.addEvents(),Zt&&e.setAttribute("src",r),!0},s.EVENTS=["load","error"],s})(nt),ur=(function(i){ze(s,i);function s(){return i!==null&&i.apply(this,arguments)||this}var t=s.prototype;return t.checkElement=function(){var e=this.element;return e.readyState>=1?!1:e.error?(this.onAlreadyError(e),!1):(this.addEvents(),!0)},s.EVENTS=["loadedmetadata","error"],s})(nt),lr=(function(i){ze(s,i);function s(t){return t===void 0&&(t={}),i.call(this,Ce({loaders:{img:ar,video:ur}},t))||this}return s})(or);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Xe=function(i,s){return Xe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},Xe(i,s)};function it(i,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");Xe(i,s);function t(){this.constructor=i}i.prototype=s===null?Object.create(s):(t.prototype=s.prototype,new t)}var A=function(){return A=Object.assign||function(s){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(s[n]=t[n])}return s},A.apply(this,arguments)};function zt(i,s,t,e){var r=arguments.length,n=r<3?s:e===null?e=Object.getOwnPropertyDescriptor(s,t):e,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,s,t,e);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(n=(r<3?o(n):r>3?o(s,t,n):o(s,t))||n);return r>3&&n&&Object.defineProperty(s,t,n),n}function lt(i,s){for(var t=0,e=s.length,r=i.length;t<e;t++,r++)i[r]=s[t];return i}var W={horizontal:!1,useTransform:!1,percentage:!1,isEqualSize:!1,isConstantSize:!1,gap:0,attributePrefix:"data-grid-",resizeDebounce:100,maxResizeDebounce:0,autoResize:!0,preserveUIOnDestroy:!1,defaultDirection:"end",externalContainerManager:null,externalItemRenderer:null,renderOnPropertyChange:!0,useFit:!0,outlineLength:0,outlineSize:0,useRoundedSize:!0,useResizeObserver:!1,observeChildren:!1},T;(function(i){i[i.PROPERTY=1]="PROPERTY",i[i.RENDER_PROPERTY=2]="RENDER_PROPERTY"})(T||(T={}));var ee;(function(i){i[i.UNCHECKED=1]="UNCHECKED",i[i.UNMOUNTED=2]="UNMOUNTED",i[i.MOUNTED=3]="MOUNTED"})(ee||(ee={}));var Y;(function(i){i[i.NEED_UPDATE=1]="NEED_UPDATE",i[i.WAIT_LOADING=2]="WAIT_LOADING",i[i.UPDATED=3]="UPDATED"})(Y||(Y={}));var Et={gap:T.RENDER_PROPERTY,defaultDirection:T.PROPERTY,renderOnPropertyChange:T.PROPERTY,preserveUIOnDestroy:T.PROPERTY,useFit:T.PROPERTY,outlineSize:T.RENDER_PROPERTY,outlineLength:T.RENDER_PROPERTY},Re={horizontal:{inlinePos:"top",contentPos:"left",inlineSize:"height",contentSize:"width"},vertical:{inlinePos:"left",contentPos:"top",inlineSize:"width",contentSize:"height"}};function cr(i){return Object.keys(i)}function Ot(i,s){var t=Pt(i);return gt(s.map(function(e){return e.target}),t.map(function(e){return e.element})).maintained.filter(function(e){var r=e[0],n=e[1],o=s[r].size,a=i[n];return!a.inlineSize||!a.contentSize||o.inlineSize!==a.computedInlineSize||o.blockSize!==a.computedContentSize}).map(function(e){var r=e[1];return i[r]})}function Pt(i){return i.filter(function(s){return s.element})}function ct(i){return Pt(i).map(function(s){return s.element})}function _e(i){return typeof i=="string"}function hr(i){return typeof i=="number"}function fr(i){return i.replace(/[\s-_]([a-z])/g,function(s,t){return t.toUpperCase()})}function dr(i,s){for(var t={},e=i.attributes,r=e.length,n=0;n<r;++n){var o=e[n],a=o.name,u=o.value;a.indexOf(s)!==-1&&(t[fr(a.replace(s,""))]=u)}return t}function st(i){var s=i.prototype,t=i.propertyTypes,e=function(n){var o=t[n]===T.RENDER_PROPERTY,a=Object.getOwnPropertyDescriptor(s,n)||{},u=a.get||function(){return this.options[n]},l=a.set||function(f){var d=this.options,p=d[n];p!==f&&(d[n]=f,o&&d.renderOnPropertyChange&&this.scheduleRender())},c={enumerable:!0,configurable:!0,get:u,set:l};Object.defineProperty(s,n,c)};for(var r in t)e(r)}function xe(i){for(var s=[],t=0;t<i;++t)s.push(t);return s}function De(i,s,t){return Math.min(t,Math.max(i,s))}function ke(i,s){var t=1/s;return Math.round(i/s)/t}var pr=(function(){function i(t,e){var r=this;e===void 0&&(e={}),this._resizeTimer=0,this._maxResizeDebounceTimer=0,this.rect={width:0,height:0},this._updatedEntries=[],this._onWindowResize=function(){r._scheduleResize([{target:r.container}])},this._onObserve=function(n){var o=r._options,a=r.container,u=o.rectBox,l=o.childrenRectBox;r._scheduleResize(n.map(function(c){var h=c.target,f=h===a?u:l,d=f==="border-box"?c.borderBoxSize:c.contentBoxSize;if(!d){var p=c.contentRect;d=[{inlineSize:p.width,blockSize:p.height}]}return{size:d[0]||d,target:c.target}}))},this._scheduleResize=function(n){var o=r._options,a=o.resizeDebounce,u=o.maxResizeDebounce,l=r._updatedEntries;l.push.apply(l,n),r._updatedEntries=l.filter(function(c,h){return l.lastIndexOf(c)===h}),!r._maxResizeDebounceTimer&&u>=a&&(r._maxResizeDebounceTimer=window.setTimeout(r._onResize,u)),r._resizeTimer&&(clearTimeout(r._resizeTimer),r._resizeTimer=0),r._resizeTimer=window.setTimeout(r._onResize,a)},this._onResize=function(){clearTimeout(r._resizeTimer),clearTimeout(r._maxResizeDebounceTimer),r._maxResizeDebounceTimer=0,r._resizeTimer=0;var n=r._updatedEntries,o=r.container,a,u=n.filter(function(R){return R.target===o?(a=R,!1):!0}),l=u.length>0,c=!!a;if(c){var h=r._options.watchDirection,f=r.rect,d=a.size;d?r.setRect({width:d.inlineSize,height:d.blockSize}):r.resize();var p=r.rect,v=h==="box"||h==="width",g=h==="box"||h==="height";c=!h||v&&f.width!==p.width||g&&f.height!==p.height}r._updatedEntries=[],(c||l)&&r._emitter.trigger("resize",{isResizeContainer:c,childEntries:u})},this._options=A({resizeDebounce:100,maxResizeDebounce:0,useResizeObserver:!1,useWindowResize:!0,watchDirection:!1,rectBox:"content-box",childrenRectBox:"border-box"},e),this.container=_e(t)?document.querySelector(t):t,this._init()}var s=i.prototype;return s.getRect=function(){return this.rect},s.setRect=function(t){this.rect=A({},t)},s.isObserverEnabled=function(){return!!this._observer},s.resize=function(){var t=this.container;this.setRect(this._options.rectBox==="border-box"?{width:t.offsetWidth,height:t.offsetHeight}:{width:t.clientWidth,height:t.clientHeight})},s.observeChildren=function(t){var e=this._observer;if(e){var r=this._options.childrenRectBox;t.forEach(function(n){n&&e.observe(n,{box:r})})}},s.unobserveChildren=function(t){var e=this._observer;e&&t.forEach(function(r){r&&e.unobserve(r)})},s.listen=function(t){return this._emitter.on("resize",t),this},s.destroy=function(){var t;(t=this._observer)===null||t===void 0||t.disconnect(),this._options.useWindowResize&&window.removeEventListener("resize",this._onWindowResize)},s._init=function(){var t=this.container,e=this._options;this._emitter=new ve,e.useResizeObserver&&window.ResizeObserver&&(this._observer=new window.ResizeObserver(this._onObserve),this._observer.observe(t,{box:e.rectBox})),e.useWindowResize&&window.addEventListener("resize",this._onWindowResize),this.resize()},i})(),bt=(function(i){it(s,i);function s(e,r){var n=i.call(this)||this;return n.container=e,n._onResize=function(o){n.trigger("resize",o)},n.options=A({horizontal:W.horizontal,autoResize:W.autoResize,resizeDebounce:W.resizeDebounce,maxResizeDebounce:W.maxResizeDebounce,useResizeObserver:W.useResizeObserver},r),n._init(),n}var t=s.prototype;return t.resize=function(){var e=this.container;this.setRect({width:e.clientWidth,height:e.clientHeight})},t.isObserverEnabled=function(){return this._watcher.isObserverEnabled()},t.getRect=function(){return this._watcher.getRect()},t.observeChildren=function(e){this._watcher.observeChildren(e)},t.unobserveChildren=function(e){this._watcher.unobserveChildren(e)},t.setRect=function(e){this._watcher.setRect(e)},t.getInlineSize=function(){return this.getRect()[this._names.inlineSize]},t.getContentSize=function(){return this.getRect()[this._names.contentSize]},t.getStatus=function(){return{rect:this._watcher.getRect()}},t.setStatus=function(e){this.setRect(e.rect),this.setContentSize(this.getContentSize())},t.setContentSize=function(e){var r,n=this.options.horizontal?"width":"height";this.setRect(A(A({},this.getRect()),(r={},r[n]=e,r))),this.container.style[n]=e+"px"},t.destroy=function(e){e===void 0&&(e={}),this._watcher.destroy(),e.preserveUI||(this.container.style.cssText=this.orgCSSText)},t._init=function(){var e=this.container,r=window.getComputedStyle(e);this.orgCSSText=e.style.cssText,r.position==="static"&&(e.style.position="relative");var n=this.options;this._watcher=new pr(e,{useWindowResize:n.autoResize,useResizeObserver:n.useResizeObserver,resizeDebounce:n.resizeDebounce,maxResizeDebounce:n.maxResizeDebounce,watchDirection:n.useResizeObserver?this._names.inlineSize:!1}).listen(this._onResize)},Object.defineProperty(t,"_names",{get:function(){return Re[this.options.horizontal?"horizontal":"vertical"]},enumerable:!1,configurable:!0}),s})(ve),Mt=(function(){function i(t){this.initialRects={},this.sizePercetage=!1,this.posPercetage=!1,this.options=A({attributePrefix:W.attributePrefix,useTransform:W.useTransform,horizontal:W.horizontal,percentage:W.percentage,isEqualSize:W.isEqualSize,isConstantSize:W.isConstantSize,useRoundedSize:W.useRoundedSize},t),this._init()}var s=i.prototype;return s.resize=function(){this.initialRects={}},s.renderItems=function(t){var e=this;t.forEach(function(r){e._renderItem(r)})},s.getInlineSize=function(){return this.containerRect[this.options.horizontal?"height":"width"]},s.setContainerRect=function(t){this.containerRect=t},s.updateEqualSizeItems=function(t,e){var r=this;this.updateItems(t);var n=t.some(function(a){return a.attributes.sizeGroup});if(this.options.isEqualSize||n){var o=t.some(function(a){return a.updateState===Y.UPDATED});o&&e.forEach(function(a){t.indexOf(a)===-1&&r.updateItem(a,!0)})}},s.updateItems=function(t){var e=this;t.forEach(function(r){e.updateItem(r)})},s.getStatus=function(){return{initialRects:this.initialRects}},s.setStatus=function(t){this.initialRects=t.initialRects},s._init=function(){var t=this.options.percentage,e=!1,r=!1;t===!0?(e=!0,r=!0):t&&(t.indexOf("position")>-1&&(r=!0),t.indexOf("size")>-1&&(e=!0)),this.posPercetage=r,this.sizePercetage=e},s.updateItem=function(t,e){var r,n=this.options,o=n.isEqualSize,a=n.isConstantSize,u=n.useRoundedSize,l=this.initialRects,c=t.orgRect,h=t.element,f=t.updateState===Y.WAIT_LOADING,d=c&&c.width&&c.height,p,v=h?dr(h,this.options.attributePrefix):t.attributes,g=(r=v.sizeGroup)!==null&&r!==void 0?r:"",R=v.notEqualSize;if(g!==""&&l[g])p=l[g];else if(o&&!R&&!g&&l[""])p=l[""];else if(a&&d&&!f&&t.isFirstUpdate)p=c;else{if(e||!h)return;if(p={left:h.offsetLeft,top:h.offsetTop,width:0,height:0},u)p.width=h.offsetWidth,p.height=h.offsetHeight;else{var y=h.getBoundingClientRect();p.width=y.width,p.height=y.height}}return t.attributes=v,t.shouldReupdate=!1,(!t.isFirstUpdate||!d)&&(t.orgRect=A({},p)),t.rect=A({},p),e||(t.element&&(t.mountState=ee.MOUNTED),t.updateState===Y.NEED_UPDATE&&(t.updateState=Y.UPDATED,t.isFirstUpdate=!0),!f&&!R&&!l[g]&&(l[g]=A({},p))),p},s._renderItem=function(t){var e=t.element,r=t.cssRect;if(!(!e||!r)){var n=this.options,o=n.horizontal,a=n.useTransform,u=this.posPercetage,l=this.sizePercetage,c=["position: absolute;"],h=Re[o?"horizontal":"vertical"],f=h.inlineSize,d=h.inlinePos,p=this.getInlineSize(),v=cr(r),g=v.length>0;a&&(v=v.filter(function(R){return R!=="top"&&R!=="left"}),c.push("transform: "+("translate("+(r.left||0)+"px, "+(r.top||0)+"px);"))),c.push.apply(c,v.map(function(R){var y=r[R];return R===f&&l||R===d&&u?R+": "+y/p*100+"%;":R+": "+y+"px;"})),g&&(e.style.cssText+=c.join(""))}},i})(),Ue=(function(){function i(t,e){e===void 0&&(e={});var r;this.horizontal=t,this.isUpdating=!1,this.shouldReupdate=!1,this.hasTransition=!1,this.transitionDuration="",this.isRestoreOrgCSSText=!0;var n=e.element,o=A({key:"",index:0,orgRect:{left:0,top:0,width:0,height:0},rect:{left:0,top:0,width:0,height:0},cssRect:{},attributes:{},data:{},isFirstUpdate:!1,mountState:ee.UNCHECKED,updateState:Y.NEED_UPDATE,element:n||null,orgCSSText:(r=n?.style.cssText)!==null&&r!==void 0?r:"",gridData:{}},e);for(var a in o)this[a]=o[a]}var s=i.prototype;return Object.defineProperty(s,"orgInlineSize",{get:function(){var t=this._names.inlineSize;return this.orgRect[t]||this.rect[t]},enumerable:!1,configurable:!0}),Object.defineProperty(s,"orgContentSize",{get:function(){var t=this._names.contentSize;return this.orgRect[t]||this.rect[t]},enumerable:!1,configurable:!0}),Object.defineProperty(s,"inlineSize",{get:function(){return this.rect[this._names.inlineSize]},enumerable:!1,configurable:!0}),Object.defineProperty(s,"contentSize",{get:function(){return this.rect[this._names.contentSize]},enumerable:!1,configurable:!0}),Object.defineProperty(s,"cssInlineSize",{get:function(){return this.cssRect[this._names.inlineSize]},set:function(t){this.cssRect[this._names.inlineSize]=t},enumerable:!1,configurable:!0}),Object.defineProperty(s,"cssContentSize",{get:function(){return this.cssRect[this._names.contentSize]},set:function(t){this.cssRect[this._names.contentSize]=t},enumerable:!1,configurable:!0}),Object.defineProperty(s,"cssInlinePos",{get:function(){return this.cssRect[this._names.inlinePos]},set:function(t){this.cssRect[this._names.inlinePos]=t},enumerable:!1,configurable:!0}),Object.defineProperty(s,"cssContentPos",{get:function(){return this.cssRect[this._names.contentPos]},set:function(t){this.cssRect[this._names.contentPos]=t},enumerable:!1,configurable:!0}),Object.defineProperty(s,"computedInlineSize",{get:function(){var t=this._names.inlineSize;return this.cssRect[t]||this.rect[t]||this.orgRect[t]},enumerable:!1,configurable:!0}),Object.defineProperty(s,"computedContentSize",{get:function(){var t=this._names.contentSize;return this.cssRect[t]||this.rect[t]||this.orgRect[t]},enumerable:!1,configurable:!0}),Object.defineProperty(s,"computedInlinePos",{get:function(){var t,e=this._names.inlinePos;return(t=this.cssRect[e])!==null&&t!==void 0?t:this.rect[e]},enumerable:!1,configurable:!0}),Object.defineProperty(s,"computedContentPos",{get:function(){var t,e=this._names.contentPos;return(t=this.cssRect[e])!==null&&t!==void 0?t:this.rect[e]},enumerable:!1,configurable:!0}),s.setCSSGridRect=function(t){var e=Re[this.horizontal?"horizontal":"vertical"],r={};for(var n in t)r[e[n]]=t[n];this.cssRect=r},s.addCSSGridRect=function(t){var e=Re[this.horizontal?"horizontal":"vertical"],r=this.cssRect;for(var n in t)r[e[n]]=t[n]},s.getStatus=function(){return{index:this.index,mountState:this.mountState,updateState:this.updateState,attributes:this.attributes,orgCSSText:this.orgCSSText,isFirstUpdate:this.isFirstUpdate,element:null,key:this.key,orgRect:this.orgRect,rect:this.rect,cssRect:this.cssRect,gridData:this.gridData,data:this.data}},s.getMinimizedStatus=function(){var t={orgRect:this.orgRect,rect:this.rect,cssRect:this.cssRect,attributes:this.attributes,gridData:this.gridData},e=this,r=e.key,n=e.mountState,o=e.updateState,a=e.isFirstUpdate,u=e.orgCSSText;return typeof r<"u"&&(t.key=r),n!==ee.UNCHECKED&&(t.mountState=n),o!==Y.NEED_UPDATE&&(t.updateState=o),a&&(t.isFirstUpdate=!0),u&&(t.orgCSSText=u),t},Object.defineProperty(s,"_names",{get:function(){return this.horizontal?Re.horizontal:Re.vertical},enumerable:!1,configurable:!0}),i})(),ge=(function(i){it(s,i);function s(e,r){r===void 0&&(r={});var n=i.call(this)||this;n.items=[],n.outlines={start:[],end:[]},n._renderTimer=0,n._onResize=function(z){if(z.isResizeContainer)n._renderItems({useResize:!0},!0);else{var b=Ot(n.items,z.childEntries);b.length>0&&n.updateItems(b)}},n.options=A(A({},n.constructor.defaultOptions),r),n.containerElement=_e(e)?document.querySelector(e):e;var o=n.options,a=o.isEqualSize,u=o.isConstantSize,l=o.useTransform,c=o.horizontal,h=o.percentage,f=o.externalContainerManager,d=o.externalItemRenderer,p=o.resizeDebounce,v=o.maxResizeDebounce,g=o.autoResize,R=o.useRoundedSize,y=o.useResizeObserver;return n.containerManager=f||new bt(n.containerElement,{horizontal:c,resizeDebounce:p,maxResizeDebounce:v,autoResize:g,useResizeObserver:y}).on("resize",n._onResize),n.itemRenderer=d||new Mt({useTransform:l,isEqualSize:a,isConstantSize:u,percentage:h,useRoundedSize:R}),n._init(),n}var t=s.prototype;return t.getContainerElement=function(){return this.containerElement},t.getItems=function(){return this.items},t.getChildren=function(){return[].slice.call(this.containerElement.children)},t.setItems=function(e){e.forEach(function(o,a){o.index=a});var r=this.options;if(r.useResizeObserver&&r.observeChildren){var n=this.containerManager;n.unobserveChildren(ct(this.items)),n.observeChildren(ct(e))}return this.items=e,this},t.getContainerInlineSize=function(){return this.containerManager.getInlineSize()},t.getOutlines=function(){return this.outlines},t.setOutlines=function(e){return this.outlines=e,this},t.syncElements=function(e){e===void 0&&(e={});var r=this.items,n=this.options.horizontal,o=this.getChildren(),a=gt(this.items.map(function(d){return d.element}),o),u=a.added,l=a.maintained,c=a.changed,h=a.removed,f=[];return l.forEach(function(d){var p=d[0],v=d[1];f[v]=r[p]}),u.forEach(function(d){f[d]=new Ue(n,{element:o[d]})}),this.setItems(f),(u.length||h.length||c.length)&&this.renderItems(e),this},t.updateItems=function(e,r){e===void 0&&(e=this.items),r===void 0&&(r={});var n=r.useOrgResize;return e.forEach(function(o){if(n){var a=o.orgRect;a.width=0,a.height=0}o.updateState=Y.NEED_UPDATE}),this.checkReady(r),this},t.renderItems=function(e){return e===void 0&&(e={}),this._renderItems(e),this},t.getStatus=function(e){return{outlines:this.outlines,items:this.items.map(function(r){return e?r.getMinimizedStatus():r.getStatus()}),containerManager:this.containerManager.getStatus(),itemRenderer:this.itemRenderer.getStatus()}},t.setStatus=function(e){var r=this,n=this.options.horizontal,o=this.containerManager,a=o.getInlineSize(),u=this.getChildren();return this.itemRenderer.setStatus(e.itemRenderer),o.setStatus(e.containerManager),this.outlines=e.outlines,this.items=e.items.map(function(l,c){return new Ue(n,A(A({},l),{element:u[c]}))}),this.itemRenderer.renderItems(this.items),a!==o.getInlineSize()?this.renderItems({useResize:!0}):window.setTimeout(function(){r._renderComplete({direction:r.defaultDirection,mounted:r.items,updated:[],isResize:!1})}),this},t.getComputedOutlineSize=function(e){return e===void 0&&(e=this.items),this.options.outlineSize||this.getContainerInlineSize()},t.getComputedOutlineLength=function(e){return e===void 0&&(e=this.items),this.options.outlineLength||1},t.destroy=function(e){var r;e===void 0&&(e={});var n=e.preserveUI,o=n===void 0?this.options.preserveUIOnDestroy:n;this.containerManager.destroy({preserveUI:o}),o||this.items.forEach(function(a){var u=a.element,l=a.orgCSSText;u&&(u.style.cssText=l)}),(r=this._im)===null||r===void 0||r.destroy()},t.getInlineGap=function(){return this._getDirectionalGap("inline")},t.getContentGap=function(){return this._getDirectionalGap("content")},t.checkReady=function(e){var r=this,n;e===void 0&&(e={});var o=e.useOrgResize,a=this.items,u=a.filter(function(h){var f;return((f=h.element)===null||f===void 0?void 0:f.parentNode)&&h.updateState!==Y.UPDATED}),l=a.filter(function(h){var f;return((f=h.element)===null||f===void 0?void 0:f.parentNode)&&h.mountState!==ee.MOUNTED}),c=[];l.filter(function(h){if(h.hasTransition)return!0;var f=h.element,d=parseFloat(getComputedStyle(f).transitionDuration);return d>0?(h.hasTransition=!0,h.transitionDuration=f.style.transitionDuration,!0):!1}).forEach(function(h){h.element.style.transitionDuration="0s"}),(n=this._im)===null||n===void 0||n.destroy(),this._im=new lr({prefix:this.options.attributePrefix}).on("preReadyElement",function(h){u[h.index].updateState=Y.WAIT_LOADING}).on("preReady",function(){u.forEach(function(h){var f=!h.isFirstUpdate||!h.orgRect.width||!h.orgRect.height,d=h.cssRect.width||h.cssRect.height;(f||o)&&d&&(h.element.style.cssText=h.orgCSSText)}),r._updateItems(u),r.readyItems(l,u,e)}).on("readyElement",function(h){var f=u[h.index];if(f.updateState=Y.NEED_UPDATE,h.isPreReadyOver){var d=!f.isFirstUpdate||!f.orgRect.width||!f.orgRect.height,p=f.cssRect.width||f.cssRect.height;(f.isRestoreOrgCSSText||(d||o)&&p)&&(f.element.style.cssText=f.orgCSSText),r._updateItems([f]),r.readyItems([],[f],e)}}).on("error",function(h){var f=u[h.index];r.trigger("contentError",{element:h.element,target:h.target,item:f,update:function(){c.push(f)}})}).on("ready",function(){c.length&&r.updateItems(c)}).check(u.map(function(h){return h.element}))},t.scheduleRender=function(){var e=this;this._clearRenderTimer(),this._renderTimer=window.setTimeout(function(){e.renderItems()})},t.fitOutlines=function(e){e===void 0&&(e=this.useFit);var r=this.outlines,n=r.start,o=r.end,a=n.length?Math.min.apply(Math,n):0;!e&&a>0||(r.start=n.map(function(u){return u-a}),r.end=o.map(function(u){return u-a}),this.items.forEach(function(u){var l=u.cssContentPos;hr(l)&&(u.cssContentPos=l-a)}))},t.readyItems=function(e,r,n){var o=this.outlines,a=n.direction||this.options.defaultDirection,u=n.outline||o[a==="end"?"start":"end"],l=this.items,c={start:lt([],u),end:lt([],u)};e.forEach(function(d){d.mountState=ee.MOUNTED}),r.forEach(function(d){d.isUpdating=!0}),l.length&&(c=this.applyGrid(this.items,a,u)),r.forEach(function(d){d.isUpdating=!1}),this.setOutlines(c),this.fitOutlines(),this.itemRenderer.renderItems(this.items),this._refreshContainerContentSize();var h=e.filter(function(d){return d.hasTransition});h.length&&(this.containerManager.resize(),h.forEach(function(d){var p=d.element;p.style.transitionDuration=d.transitionDuration})),this._renderComplete({direction:a,mounted:e,updated:r,isResize:!!n.useResize});var f=r.filter(function(d){return d.shouldReupdate});f.length&&this.updateItems(f)},t._isObserverEnabled=function(){return this.containerManager.isObserverEnabled()},t._updateItems=function(e){this.itemRenderer.updateEqualSizeItems(e,this.getItems())},t._getDirectionalGap=function(e){var r,n=this.options.horizontal,o=this.options.gap;if(typeof o=="number")return o;var a=n&&e==="inline"||!n&&e==="content";return(r=a?o.vertical:o.horizontal)!==null&&r!==void 0?r:W.gap},t._renderComplete=function(e){this.trigger("renderComplete",e)},t._clearRenderTimer=function(){clearTimeout(this._renderTimer),this._renderTimer=0},t._refreshContainerContentSize=function(){var e=this.outlines,r=e.start,n=e.end,o=this.getContentGap(),a=n.length?Math.max.apply(Math,n):0,u=r.length?Math.max.apply(Math,r):0,l=Math.max(u,a-o);this.containerManager.setContentSize(l)},t._resizeContainer=function(){this.containerManager.resize(),this.itemRenderer.setContainerRect(this.containerManager.getRect())},t._init=function(){this._resizeContainer()},t._renderItems=function(e,r){e===void 0&&(e={}),this._clearRenderTimer();var n=e.useResize||e.useOrgResize;n&&!r&&(this._resizeContainer(),this.itemRenderer.resize()),!this.getItems().length&&this.getChildren().length?this.syncElements(e):n?this.updateItems(this.items,e):this.checkReady(e)},s.defaultOptions=W,s.propertyTypes=Et,s=zt([st],s),s})(ve);function xt(i,s,t,e){return Math[e].apply(Math,i.slice(s,s+t))}function vr(i,s,t,e){var r=i.length-s+1,n=t==="max"?"min":"max",o=t==="max"?"lastIndexOf":"indexOf",a=xe(r).map(function(u){var l=xt(i,u,s,n);return Math[n](e,l)});return a[o](Math[t].apply(Math,a))}var Be=(function(i){it(s,i);function s(){return i!==null&&i.apply(this,arguments)||this}var t=s.prototype;return t.applyGrid=function(e,r,n){e.forEach(function(Z){Z.isRestoreOrgCSSText=!1});var o=this.getComputedOutlineSize(e),a=this.getComputedOutlineLength(e),u=!1,l=this.options,c=l.align,h=l.observeChildren,f=l.columnSizeRatio,d=l.contentAlign,p=l.stretchOutline,v=l.stretchContainerSize,g=l.stretchItemSize,R=this.getInlineGap(),y=this.getContentGap(),z=n.length,b=e.length,K=this._getAlignPoses(a,o),C=r==="end",ie=C?"min":"max",se=C?"max":"min",E=[0];if(z===a)E=n.slice();else{var V=z?Math[se].apply(Math,n):0;E=xe(a).map(function(){return V})}var _=E.slice(),Q=a>1?K[1]-K[0]:0,j=c==="stretch",te=C&&d==="start",fe=xe(E.length).map(function(){return[]}),$=C?-1/0:1/0;te&&($=Math.min.apply(Math,_));for(var J=function(Z){var k=C?Z:b-1-Z,M=e[k],ae=parseInt(M.attributes.column||"1",10),re=parseInt(M.attributes.maxColumn||"1",10),L=M.contentSize,G=Math.min(a,ae||Math.max(1,Math.ceil((M.inlineSize+R)/Q))),de=Math.min(a,Math.max(G,re)),O=vr(_,G,ie,$),P=xt(_,O,G,se);for(te&&$!==P&&($=Math.max.apply(Math,_),_=_.map(function(){return $}),P=$,O=0);G<de;){var me=O+G,X=O-1;if(C&&(me>=a||_[me]>P)||!C&&(X<0||_[X]<P))break;C||--O,++G}if(O=Math.max(0,O),G=Math.min(a-O,G),fe[O].push(k),ae>0&&G>1||j){var pe=(G-1)*Q+o;(!I._isObserverEnabled()||!h)&&M.cssInlineSize!==pe&&(M.shouldReupdate=!0),M.cssInlineSize=pe}if(f===!0){var N=M.orgContentSize/M.orgInlineSize;L=M.computedInlineSize*N,M.cssContentSize=L,u=!0}else f&&f>0&&(L=M.computedInlineSize/f,M.cssContentSize=L,u=!0);if(p){var F=0,w=1/0;if(_e(g[0])){var oe=g[0].split(":").map(function(ye){return parseFloat(ye)}),ue=oe[0],le=oe[1];F=M.computedInlineSize*le/ue}else F=g[0];if(_e(g[1])){var Ee=g[1].split(":").map(function(kt){return parseFloat(kt)}),ue=Ee[0],le=Ee[1];w=M.computedInlineSize*le/ue}else w=g[1];L=ke(De(L,F,w),.01),M.cssContentSize=L,u=!0}var Oe=K[O];P=C?P:P-y-L,M.cssInlinePos=Oe,M.cssContentPos=P;var Pe=C?P+L+y:P;xe(G).forEach(function(ye){_[O+ye]=Pe})},I=this,U=0;U<b;++U)J(U);if(p&&e.length){var S=0;if(p==="scale-up"?S=Math.max.apply(Math,_):p==="scale-center"?S=(Math.max.apply(Math,_)+Math.min.apply(Math,_))/2:S=Math.min.apply(Math,_),C){S-=y;var x=Math.min.apply(Math,E),H=De(S-x,v[0],v[1]);S=H+x}else{var x=Math.max.apply(Math,E),H=De(x-S,v[0],v[1]);S=H-x}_.forEach(function(Z,k){var M=(fe[k].length-1)*y,ae=E[k],re=Math.abs(Z-ae)-(C?y:0)-M,L=Math.abs(S-ae)-M,G=L/re;if(!(!re||G===1||!isFinite(G))){C?_[k]=S+y:_[k]=S;var de=fe[k].length,O=C?E[k]:E[k]-y,P=fe[k].map(function(N,F){var w=e[N],oe=u?w.computedContentSize:w.contentSize,ue=0,le=1/0;if(_e(g[0])){var Ee=g[0].split(":").map(function(Dt){return parseFloat(Dt)}),Oe=Ee[0],Pe=Ee[1];ue=w.computedInlineSize*Pe/Oe}else ue=g[0];if(_e(g[1])){var ye=g[1].split(":").map(function(Nt){return parseFloat(Nt)}),Oe=ye[0],Pe=ye[1];le=w.computedInlineSize*Pe/Oe}else le=g[1];return{item:w,index:F,itemIndex:N,minSize:ue,originalSize:oe,nextSize:oe,maxSize:le}});G>1?P.sort(function(N,F){return N.originalSize-F.originalSize}):P.sort(function(N,F){return F.originalSize-N.originalSize});var me=0,X=0;if(P.forEach(function(N){var F=X>L?G:(L-X)/(re-me),w=N.originalSize,oe=ke(De(w*F,N.minSize,N.maxSize),.01);me+=w,X+=oe,N.nextSize=oe}),ke(X-L,.01)){var pe=ke(L/X,.01);P.forEach(function(N){N.nextSize*=pe})}P.sort(function(N,F){return N.index-F.index}),P.forEach(function(N,F){var w=N.item,oe=N.nextSize;if(w.addCSSGridRect({contentPos:C?O:O-oe,contentSize:oe}),C?O=w.cssContentPos+w.cssContentSize+y:O=w.cssContentPos-y,F===de-1){var ue=0,le=0;C?le=(w.cssContentPos%1>=.5?1:0)+(w.cssContentSize%1>=.5?1:0)+(S%1>=.5?-1:0):ue=(w.cssContentPos%1<.5?-1:0)+(S%1<.5?1:0),w.addCSSGridRect({contentPos:w.cssContentPos-ue,contentSize:w.cssContentSize-le})}})}})}return te&&$!==Math.min.apply(Math,_)&&($=Math.max.apply(Math,_),_=_.map(function(){return $})),{start:C?E:_,end:C?_:E}},t.getComputedOutlineSize=function(e){e===void 0&&(e=this.items);var r=this.options.align,n=this.getInlineGap(),o=this.getContainerInlineSize(),a=this.columnSize||this.outlineSize,u=this.column||this.outlineLength,l=u||1,c=0;if(r==="stretch"){if(!u){var h=this.maxStretchColumnSize||1/0;l=Math.max(1,Math.ceil((o+n)/(h+n)))}c=(o+n)/(l||1)-n}else if(a)c=a;else if(e.length){for(var f=e[0],d=0,p=e;d<p.length;d++){var v=p[d],g=v.attributes,R=parseInt(g.column||"1",10),y=parseInt(g.maxColumn||"1",10);if(!(v.updateState!==Y.UPDATED||!v.inlineSize||R!==1||y!==1)){f=v;break}}var z=f.inlineSize||0;c=z}else c=o;return c||0},t.getComputedOutlineLength=function(e){e===void 0&&(e=this.items);var r=this.getInlineGap(),n=this.column||this.outlineLength,o=this.columnCalculationThreshold,a=1;if(n)a=n;else{var u=this.getComputedOutlineSize(e);a=Math.max(1,Math.floor((this.getContainerInlineSize()+r)/(u-o+r))),this.maxStretchColumnSize||(a=Math.min(e.length,a))}return a},t._getAlignPoses=function(e,r){var n=this.options.align,o=this.getInlineGap(),a=this.getContainerInlineSize(),u=xe(e),l=0,c=0;if(n==="justify"||n==="stretch"){var h=e-1;c=h?Math.max((a-r)/h,r+o):0,l=Math.min(0,a/2-(h*c+r)/2)}else{c=r+o;var f=(e-1)*c+r;n==="center"?l=(a-f)/2:n==="end"&&(l=a-f)}return u.map(function(d){return l+d*c})},s.propertyTypes=A(A({},ge.propertyTypes),{column:T.RENDER_PROPERTY,columnSize:T.RENDER_PROPERTY,columnSizeRatio:T.RENDER_PROPERTY,align:T.RENDER_PROPERTY,columnCalculationThreshold:T.RENDER_PROPERTY,maxStretchColumnSize:T.RENDER_PROPERTY,contentAlign:T.RENDER_PROPERTY,stretchOutline:T.RENDER_PROPERTY,stretchContainerSize:T.RENDER_PROPERTY,stretchItemSize:T.RENDER_PROPERTY}),s.defaultOptions=A(A({},ge.defaultOptions),{align:"justify",column:0,columnSize:0,columnSizeRatio:0,columnCalculationThreshold:.5,maxStretchColumnSize:1/0,contentAlign:"masonry",stretchOutline:"",stretchContainerSize:[0,1/0],stretchItemSize:[0,1/0]}),s=zt([st],s),s})(ge);function gr(i){return typeof i=="string"}function ht(i){var s;return i?(gr(i)?s=document.querySelector(i):i instanceof Element?s=i:("value"in i||"current"in i)&&(s=i.value||i.current),s):null}var Qe=function(i,s){return Qe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},Qe(i,s)};function he(i,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");Qe(i,s);function t(){this.constructor=i}i.prototype=s===null?Object.create(s):(t.prototype=s.prototype,new t)}var m=function(){return m=Object.assign||function(s){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(s[n]=t[n])}return s},m.apply(this,arguments)};function ot(i,s){var t={};for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&s.indexOf(e)<0&&(t[e]=i[e]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(i);r<e.length;r++)s.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(i,e[r])&&(t[e[r]]=i[e[r]]);return t}function at(i,s,t,e){var r=arguments.length,n=r<3?s:e===null?e=Object.getOwnPropertyDescriptor(s,t):e,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,s,t,e);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(n=(r<3?o(n):r>3?o(s,t,n):o(s,t))||n);return r>3&&n&&Object.defineProperty(s,t,n),n}function B(i,s,t){if(t||arguments.length===2)for(var e=0,r=s.length,n;e<r;e++)(n||!(e in s))&&(n||(n=Array.prototype.slice.call(s,0,e)),n[e]=s[e]);return i.concat(n||Array.prototype.slice.call(s))}var mr=typeof window<"u"?window.navigator.userAgent:"",yr=/iPhone|iPad/.test(mr),Rr="infinitegrid-container",_r={renderOnPropertyChange:!0,useFit:!0,autoResize:!0},Ir=m({},Et),Ie={START:"start",END:"end"},Me={CHANGE_SCROLL:"changeScroll",REQUEST_APPEND:"requestAppend",REQUEST_PREPEND:"requestPrepend",RENDER_COMPLETE:"renderComplete",CONTENT_ERROR:"contentError"},Sr={type:!0,groupKey:!0,key:!0,element:!0,html:!0,data:!0,inserted:!0,attributes:!0},q;(function(i){i[i.NORMAL=0]="NORMAL",i[i.VIRTUAL=1]="VIRTUAL",i[i.LOADING=2]="LOADING"})(q||(q={}));var D;(function(i){i[i.NORMAL=0]="NORMAL",i[i.VIRTUAL=1]="VIRTUAL",i[i.LOADING=2]="LOADING"})(D||(D={}));var we;(function(i){i[i.NOT_REMOVE=0]="NOT_REMOVE",i[i.MINIMIZE_INVISIBLE_ITEMS=1]="MINIMIZE_INVISIBLE_ITEMS",i[i.MINIMIZE_INVISIBLE_GROUPS=2]="MINIMIZE_INVISIBLE_GROUPS",i[i.REMOVE_INVISIBLE_GROUPS=3]="REMOVE_INVISIBLE_GROUPS"})(we||(we={}));var ft=-9999,Ke=(function(i){he(s,i);function s(e,r){var n=i.call(this,e,m({html:"",type:D.NORMAL,cssRect:{top:ft,left:ft}},r))||this;if(n.type===D.VIRTUAL){(n.rect.width||n.rect.height)&&(n.mountState=ee.UNMOUNTED);var o=n.orgRect,a=n.rect,u=n.cssRect;u.width?a.width=u.width:o.width&&(a.width=o.width),u.height?a.height=u.height:o.height&&(a.height=o.height)}return n}var t=s.prototype;return t.getVirtualStatus=function(){return{type:D.VIRTUAL,groupKey:this.groupKey,key:this.key,orgRect:this.orgRect,rect:this.rect,cssRect:this.cssRect,attributes:this.attributes}},t.getMinimizedStatus=function(){var e=m(m({},i.prototype.getMinimizedStatus.call(this)),{type:D.NORMAL,groupKey:this.groupKey});return this.html&&(e.html=this.html),e},s})(Ue),Cr="__INFINITEGRID__LOADING_GRID",zr="__INFINITEGRID__LOADING_ITEM",Er=(function(i){he(s,i);function s(){var e=i!==null&&i.apply(this,arguments)||this;return e.type="",e}var t=s.prototype;return t.getLoadingItem=function(){return this.items[0]||null},t.setLoadingItem=function(e){if(e){var r=this.getLoadingItem();if(!r)this.items=[new Ke(this.options.horizontal,m(m({},e),{type:D.LOADING,key:zr}))];else for(var n in e)r[n]=e[n]}else this.items=[]},t.applyGrid=function(e,r,n){if(!e.length)return{start:n,end:n};var o=n.length?B([],n,!0):[0],a=e[0],u=a.contentSize+this.gap;if(a.cssInlinePos=this.getContainerInlineSize()/2-a.inlineSize/2,r==="end"){var l=Math.max.apply(Math,o);return a.cssContentPos=l,{start:o,end:o.map(function(h){return h+u})}}else{var c=Math.min.apply(Math,o);return a.cssContentPos=c-u,{start:o.map(function(h){return h-u}),end:o}}},s})(ge);function He(i){return i===window}function dt(i){return typeof i=="number"}function Je(i){return typeof i=="string"}function Or(i){return typeof i=="object"}function Tt(i){return i.reduce(function(s,t){return B(B([],s,!0),t,!0)},[])}function Pr(i){var s=i.gridOptions,t=ot(i,["gridOptions"]);return m(m({},wt(s)),t)}function wt(i){var s={},t={},e=ge.defaultOptions;for(var r in i){var n=i[r];r in _r||(t[r]=n),r in e&&(s[r]=n)}return m(m({},s),{gridOptions:t})}function br(i){var s=[],t={},e={};i.filter(function(o){return o.groupKey!=null}).forEach(function(o){var a=o.groupKey;e[a]=!0});var r,n=!1;return i.forEach(function(o,a){o.groupKey!=null?n=!1:!o.inserted&&i[a-1]?(o.groupKey=i[a-1].groupKey,n=!1):(n||(r=et(e),n=!0,e[r]=!0),o.groupKey=r);var u=o.groupKey,l=t[u];l||(l={groupKey:u,items:[]},t[u]=l,s.push(l)),l.items.push(o)}),s}function Mr(i,s,t,e){var r=je(i,s,function(a){return a}),n=-1,o=-1;return r.maintained.forEach(function(a){var u=a[0],l=a[1];t<=u&&u<=e&&(n===-1?(n=l,o=l):(n=Math.min(n,l),o=Math.max(o,l)))}),{startCursor:n,endCursor:o}}function xr(i,s,t){var e=[];if(s==="start"){var r=ne(i,function(l){return l.type===q.NORMAL});if(r===-1)return[];var n=ne(i,function(l){return ne(t,function(c){return c.groupKey===l.groupKey})>=0}),o=n>=0?Math.min(r,n):r;e=i.slice(0,o)}else{var r=Ge(i,function(c){return c.type===q.NORMAL});if(r===-1)return[];var a=Ge(i,function(c){return ne(t,function(h){return h.groupKey===c.groupKey})>=0}),u=a>=0?Math.max(r,a):r;e=i.slice(u+1)}return e}function Lt(i){var s=i.prototype,t=i.propertyTypes,e=function(n){var o={enumerable:!0,configurable:!0,get:function(){var a=this.groupManager.options;return n in a?a[n]:a.gridOptions[n]},set:function(a){var u,l=this.groupManager[n];l!==a&&(this.groupManager.gridOptions=(u={},u[n]=a,u))}};Object.defineProperty(s,n,o)};for(var r in t)e(r)}function et(i,s){s===void 0&&(s="");for(var t=0;;){var e="infinitegrid_".concat(s).concat(t++);if(!(e in i))return e}}function Gt(i){var s=document.createElement("div");return s.innerHTML=i,Le(s.children)}function pt(i,s){var t;return Je(i)?t=Gt(i):t=i,t.map(function(e){var r,n="",o;if(Je(e))n=e;else if("parentNode"in e)r=e,n=e.outerHTML;else return m({groupKey:s,inserted:!0},e);return{key:o,groupKey:s,html:n,element:r,inserted:!0}})}function Le(i){var s=[];if(i)for(var t=i.length,e=0;e<t;e++)s.push(i[e]);return s}function ne(i,s){for(var t=i.length,e=0;e<t;++e)if(s(i[e],e))return e;return-1}function Ge(i,s){for(var t=i.length,e=t-1;e>=0;--e)if(s(i[e],e))return e;return-1}function Tr(i){var s={};for(var t in i)t in Sr&&(s[t]=i[t]);return s}function wr(i,s){for(var t in s){var e=s[t];Or(e)?i[t]=m(m({},i[t]),e):i[t]=s[t]}}function Fe(i,s){return i.length===s.length&&i.every(function(t,e){return s[e]===t})}function Lr(i){for(var s=[],t=0;t<i;++t)s.push(t);return s}function vt(i){return Tt(i.map(function(s){var t=s.grid;return t.getItems()}))}function Ne(i,s){return s?B([],i,!0):i.filter(function(t){return t.type!==D.VIRTUAL})}var Gr=(function(i){he(s,i);function s(e,r){var n=i.call(this,e,Pr(r))||this;return n.groupItems=[],n.groups=[],n.itemKeys={},n.groupKeys={},n.startCursor=0,n.endCursor=0,n._placeholder=null,n._loadingGrid=new Er(e,{externalContainerManager:n.containerManager,useFit:!1,autoResize:!1,renderOnPropertyChange:!1,gap:n.gap}),n._mainGrid=n._makeGrid(),n}var t=s.prototype;return Object.defineProperty(t,"gridOptions",{set:function(e){var r=wt(e),n=r.gridOptions,o=ot(r,["gridOptions"]),a=this._checkShouldRender(e);this.options.gridOptions=m(m({},this.options.gridOptions),n),B([this._mainGrid],this.groups.map(function(l){var c=l.grid;return c}),!0).forEach(function(l){for(var c in e)l[c]=e[c]});for(var u in o)this[u]=o[u];this._loadingGrid.gap=this.gap,a&&this.scheduleRender()},enumerable:!1,configurable:!0}),t.getItemByKey=function(e){return this.itemKeys[e]||null},t.getGroupItems=function(e){return Ne(this.groupItems,e)},t.getVisibleItems=function(e){return Ne(this.items,e)},t.getRenderingItems=function(){return this.hasPlaceholder()?this.items:this.items.filter(function(e){return e.type!==D.VIRTUAL})},t.getGroups=function(e){return Ne(this.groups,e)},t.hasVisibleVirtualGroups=function(){return this.getVisibleGroups(!0).some(function(e){return e.type===q.VIRTUAL})},t.hasPlaceholder=function(){return!!this._placeholder},t.hasLoadingItem=function(){return!!this._getLoadingItem()},t.updateItems=function(e,r){return e===void 0&&(e=this.groupItems),i.prototype.updateItems.call(this,e,r)},t.setPlaceholder=function(e){this._placeholder=e,this._updatePlaceholder()},t.getLoadingType=function(){return this._loadingGrid.type},t.startLoading=function(e){return this._loadingGrid.type=e,this.items=this._getRenderingItems(),!0},t.endLoading=function(){var e=this._loadingGrid.type;return this._loadingGrid.type="",this.items=this._getRenderingItems(),!!e},t.setLoading=function(e){this._loadingGrid.setLoadingItem(e),this.items=this._getRenderingItems()},t.getVisibleGroups=function(e){var r=this.groups.slice(this.startCursor,this.endCursor+1);return Ne(r,e)},t.getComputedOutlineLength=function(e){return e===void 0&&(e=this.items),this._mainGrid.getComputedOutlineLength(e)},t.getComputedOutlineSize=function(e){return e===void 0&&(e=this.items),this._mainGrid.getComputedOutlineSize(e)},t.applyGrid=function(e,r,n){var o=this,a=this.groups.slice();if(!a.length)return{start:[],end:[]};var u=this._loadingGrid;u.getLoadingItem()&&(u.type==="start"?a.unshift(this._getLoadingGroup()):u.type==="end"&&a.push(this._getLoadingGroup()));var l=a.slice(),c=n;r==="start"&&l.reverse();var h=this.options.appliedItemChecker,f=this.groupItems,d=this.getComputedOutlineLength(f),p=this.getComputedOutlineSize(f),v=this.itemRenderer;return l.forEach(function(g){var R=g.grid,y=R.getItems(),z=g.type===q.VIRTUAL&&!y[0];R.outlineLength=d,R.outlineSize=p;var b=y.filter(function(C){return(C.mountState===ee.UNCHECKED||!C.rect.width)&&v.updateItem(C,!0),C.orgRect.width&&C.rect.width||h(C,R)}),K;z?K=o._applyVirtualGrid(R,r,c):b.length?K=R.applyGrid(b,r,c):K={start:B([],c,!0),end:B([],c,!0)},R.setOutlines(K),c=K[r]}),{start:a[0].grid.getOutlines().start,end:a[a.length-1].grid.getOutlines().end}},t.syncItems=function(e){var r=this,n=this.itemKeys;this.itemKeys={};var o=this._syncItemInfos(e.map(function(f){return Tr(f)}),n),a=this.groupKeys,u=br(o),l=this._splitVirtualGroups("start",u),c=this._splitVirtualGroups("end",u);u=B(B(B([],l,!0),this._mergeVirtualGroups(u),!0),c,!0);var h=u.map(function(f){var d,p,v=f.groupKey,g=f.items,R=!g[0]||g[0].type===D.VIRTUAL,y=(p=(d=a[v])===null||d===void 0?void 0:d.grid)!==null&&p!==void 0?p:r._makeGrid(),z=R?g:g.filter(function(b){var K=b.type;return K===D.NORMAL});return y.setItems(z),{type:R?q.VIRTUAL:q.NORMAL,groupKey:v,grid:y,items:z,renderItems:g}});this._registerGroups(h)},t.renderItems=function(e){if(e===void 0&&(e={}),e.useResize){this.groupItems.forEach(function(n){n.updateState=Y.NEED_UPDATE});var r=this._getLoadingItem();r&&(r.updateState=Y.NEED_UPDATE)}return i.prototype.renderItems.call(this,e)},t.setCursors=function(e,r){this.startCursor=e,this.endCursor=r,this.items=this._getRenderingItems()},t.getStartCursor=function(){return this.startCursor},t.getEndCursor=function(){return this.endCursor},t.getGroupStatus=function(e,r){var n=this.startCursor,o=this.endCursor,a=this.groups,u=a[n],l=a[o],c=n,h=o,f=e===we.MINIMIZE_INVISIBLE_ITEMS,d=e===we.MINIMIZE_INVISIBLE_GROUPS,p;if(e===we.REMOVE_INVISIBLE_GROUPS)p=this.getVisibleGroups(r),h=p.length-1,c=0;else if(p=this.getGroups(r),!r){c=-1,h=-1;for(var v=n;v<=o;++v){var g=a[v];if(g&&g.type!==q.VIRTUAL){c=p.indexOf(g);break}}for(var v=o;v>=n;--v){var g=a[v];if(g&&g.type!==q.VIRTUAL){h=p.lastIndexOf(g);break}}}var R=p.map(function(K,C){var ie=K.grid,se=K.groupKey,E=C<c||h<C,V=f&&E,_=d&&E,Q=ie.getItems(),j=_?[]:Q.map(function(te){return V?te.getVirtualStatus():te.getMinimizedStatus()});return{type:_||V?q.VIRTUAL:q.NORMAL,groupKey:se,outlines:ie.getOutlines(),items:j}}),y=this.getGroupItems(),z=y.indexOf(u?.items[0]),b=y.indexOf(l?.items.slice().reverse()[0]);return{cursors:[c,h],orgCursors:[n,o],itemCursors:[z,b],startGroupKey:u?.groupKey,endGroupKey:l?.groupKey,groups:R,outlines:this.outlines}},t.fitOutlines=function(e){e===void 0&&(e=this.useFit);var r=this.groups,n=r[0];if(n){var o=n.grid.getOutlines(),a=o.start,u=a.length?Math.min.apply(Math,a):0;!e&&u>0||(r.forEach(function(l){var c=l.grid,h=c.getOutlines(),f=h.start,d=h.end;c.setOutlines({start:f.map(function(p){return p-u}),end:d.map(function(p){return p-u})})}),this.groupItems.forEach(function(l){var c=l.cssContentPos;dt(c)&&(l.cssContentPos=c-u)}))}},t.setGroupStatus=function(e){var r=this;this.itemKeys={},this.groupItems=[],this.items=[];var n=this.groupKeys,o=e.groups.map(function(a){var u,l,c=a.type,h=a.groupKey,f=a.items,d=a.outlines,p=r._syncItemInfos(f),v=(l=(u=n[h])===null||u===void 0?void 0:u.grid)!==null&&l!==void 0?l:r._makeGrid();return v.setOutlines(d),v.setItems(p),{type:c,groupKey:h,grid:v,items:p,renderItems:p}});this.setOutlines(e.outlines),this._registerGroups(o),this._updatePlaceholder(),this.setCursors(e.cursors[0],e.cursors[1])},t.appendPlaceholders=function(e,r){return this.insertPlaceholders("end",e,r)},t.prependPlaceholders=function(e,r){return this.insertPlaceholders("start",e,r)},t.removePlaceholders=function(e){var r=this.groups,n=r.length;if(e==="start"){var o=ne(r,function(u){return u.type===q.NORMAL});r.splice(0,o)}else if(e==="end"){var o=Ge(r,function(l){return l.type===q.NORMAL});r.splice(o+1,n-o-1)}else{var a=e.groupKey,o=ne(r,function(l){return l.groupKey===a});o>-1&&r.splice(o,1)}this.syncItems(vt(this.getGroups()))},t.insertPlaceholders=function(e,r,n){var o,a;n===void 0&&(n=et(this.groupKeys,"virtual_"));var u=[];dt(r)?u=Lr(r).map(function(){return{type:D.VIRTUAL,groupKey:n}}):Array.isArray(r)&&(u=r.map(function(f){return m(m({groupKey:n},f),{type:D.VIRTUAL})}));var l=this._makeGrid(),c=this._syncItemInfos(u,this.itemKeys);this._updatePlaceholder(c),l.setItems(c);var h={type:q.VIRTUAL,groupKey:n,grid:l,items:c,renderItems:c};return this.groupKeys[n]=h,e==="end"?(this.groups.push(h),(o=this.groupItems).push.apply(o,c)):(this.groups.splice(0,0,h),(a=this.groupItems).splice.apply(a,B([0,0],c,!1)),this.startCursor>-1&&(++this.startCursor,++this.endCursor)),{group:h,items:c}},t.shouldRerenderItems=function(){var e=!1;return this.getVisibleGroups().forEach(function(r){var n=r.items;n.length===r.renderItems.length||n.every(function(o){return o.mountState===ee.UNCHECKED})||(e=!0,r.renderItems=B([],n,!0))}),e&&(this.items=this._getRenderingItems()),e},t._updateItems=function(e){this.itemRenderer.updateEqualSizeItems(e,this.groupItems)},t._getGroupItems=function(){return vt(this.getGroups(!0))},t._getRenderingItems=function(){var e=Tt(this.getVisibleGroups(!0).map(function(o){return o.renderItems})),r=this._loadingGrid,n=r.getLoadingItem();return n&&(r.type==="end"?e.push(n):r.type==="start"&&e.unshift(n)),e},t._checkShouldRender=function(e){var r=this.options.gridConstructor,n=this.gridOptions,o=r.propertyTypes;for(var a in n)if(!(a in e)&&o[a]===T.RENDER_PROPERTY)return!0;for(var a in e)if(n[a]!==e[a]&&o[a]===T.RENDER_PROPERTY)return!0;return!1},t._applyVirtualGrid=function(e,r,n){var o=n.length?B([],n,!0):[0],a=e.getOutlines(),u=a[r==="end"?"start":"end"];return u.length!==o.length||u.some(function(l,c){return l!==o[c]})?{start:B([],o,!0),end:B([],o,!0)}:a},t._syncItemInfos=function(e,r){r===void 0&&(r={});var n=this.options.horizontal,o=this.itemKeys;e.filter(function(u){return u.key!=null}).forEach(function(u){var l=u.key,c=r[l];c?c.type===D.VIRTUAL&&u.type!==D.VIRTUAL?o[l]=new Ke(n,m({orgRect:c.orgRect,rect:c.rect},u)):(u.data&&(c.data=u.data),u.groupKey!=null&&(c.groupKey=u.groupKey),o[l]=c):o[l]=new Ke(n,m({},u))});var a=e.map(function(u){var l=u.key;u.key==null&&(l=et(o,u.type===D.VIRTUAL?"virtual_":""));var c=o[l];if(!c){var h=r[l];h?(c=h,u.data&&(c.data=u.data)):c=new Ke(n,m(m({},u),{key:l})),o[l]=c}return c});return a},t._registerGroups=function(e){var r={};e.forEach(function(n){r[n.groupKey]=n}),this.groups=e,this.groupKeys=r,this.groupItems=this._getGroupItems()},t._splitVirtualGroups=function(e,r){var n=xr(this.groups,e,r),o=this.itemKeys;return n.forEach(function(a){var u=a.renderItems;u.forEach(function(l){o[l.key]=l})}),n},t._mergeVirtualGroups=function(e){var r=this.itemKeys,n=this.groupKeys;return e.forEach(function(o){var a=n[o.groupKey];if(a){var u=o.items;u.every(function(l){return l.mountState===ee.UNCHECKED})&&a.renderItems.forEach(function(l){l.type===D.VIRTUAL&&!r[l.key]&&(u.push(l),r[l.key]=l)})}}),e},t._updatePlaceholder=function(e){e===void 0&&(e=this.groupItems);var r=this._placeholder;r&&e.filter(function(n){return n.type===D.VIRTUAL}).forEach(function(n){wr(n,r)})},t._makeGrid=function(){var e=this.options.gridConstructor,r=this.gridOptions,n=this.containerElement;return new e(n,m(m({},r),{useFit:!1,autoResize:!1,useResizeObserver:!1,observeChildren:!1,renderOnPropertyChange:!1,externalContainerManager:this.containerManager,externalItemRenderer:this.itemRenderer}))},t._getLoadingGroup=function(){var e=this._loadingGrid,r=e.getItems();return{groupKey:Cr,type:q.NORMAL,grid:e,items:r,renderItems:r}},t._getLoadingItem=function(){return this._loadingGrid.getLoadingItem()},s.defaultOptions=m(m({},ge.defaultOptions),{appliedItemChecker:function(){return!1},gridConstructor:null,gridOptions:{}}),s.propertyTypes=m(m({},ge.propertyTypes),{gridConstructor:T.PROPERTY,gridOptions:T.PROPERTY}),s=at([st],s),s})(ge),Dr=(function(i){he(s,i);function s(e){var r=i.call(this)||this;return r.startCursor=-1,r.endCursor=-1,r.size=0,r.items=[],r.itemKeys={},r.options=m({threshold:0,useRecycle:!0,defaultDirection:"end"},e),r}var t=s.prototype;return t.scroll=function(e){var r,n,o=this.startCursor,a=this.endCursor,u=this.items,l=u.length,c=this.size,h=this.options,f=h.defaultDirection,d=h.threshold,p=h.useRecycle,v=f==="end";if(l){if(o===-1||a===-1){var g=v?0:l-1;this.trigger("change",{prevStartCursor:o,prevEndCursor:a,nextStartCursor:g,nextEndCursor:g});return}}else{this.trigger(v?"requestAppend":"requestPrepend",{key:void 0,isVirtual:!1});return}var R=e+c,y=Math.max.apply(Math,u[o].startOutline),z=Math.min.apply(Math,u[a].endOutline),b=u.map(function(S){var x=S.startOutline,H=S.endOutline;if(!x.length||!H.length||Fe(x,H))return!1;var Z=Math.min.apply(Math,x),k=Math.max.apply(Math,H);return Z-d<=R&&e<=k+d}),K=0<o,C=a<l-1,ie=e<=y+d,se=R>=z-d,E=b.indexOf(!0),V=b.lastIndexOf(!0);E===-1&&(E=o,V=a),p||(E=Math.min(E,o),V=Math.max(V,a)),E===o&&K&&ie&&(E-=1),V===a&&C&&se&&(V+=1);var _=u.slice(E,V+1);if(_.every(function(S){return S.isVirtual===!0})){for(var Q=!1,j=E-1;j>=0;--j)if(!u[j].isVirtual){E=j,Q=!0;break}if(!Q){for(var j=V+1;j<l;++j)if(!u[j].isVirtual){V=j,Q=!0;break}}Q&&(_=u.slice(E,V+1))}var te=_.some(function(S){return S.isVirtual===!0});if(!((o!==E||a!==V)&&(this.trigger("change",{prevStartCursor:o,prevEndCursor:a,nextStartCursor:E,nextEndCursor:V}),!te)))if(te){var fe=(r=_[0])===null||r===void 0?void 0:r.isVirtual,$=(n=_[_.length-1])===null||n===void 0?void 0:n.isVirtual;if((!v||!se)&&fe){var J=ne(_,function(S){return!S.isVirtual}),I=(J===-1?_.length:J)-1;_[I]&&this.trigger("requestPrepend",{key:J>-1?_[J].key:void 0,nextKey:_[I].key,nextKeys:_.slice(0,I+1).map(function(S){return S.key}),isVirtual:!0})}else if((v||!ie)&&$){var J=Ge(_,function(x){return!x.isVirtual}),U=J+1;_[U]&&this.trigger("requestAppend",{key:J>-1?_[J].key:void 0,nextKey:_[U].key,nextKeys:_.slice(U).map(function(x){return x.key}),isVirtual:!0})}}else this._requestVirtualItems()||((!v||!se)&&ie?this.trigger("requestPrepend",{key:u[o].key,isVirtual:!1}):(v||!ie)&&se&&this.trigger("requestAppend",{key:u[a].key,isVirtual:!1}))},t._requestVirtualItems=function(){var e=this.options.defaultDirection==="end",r=this.items,n=this.getVisibleItems(),o=n.filter(function(y){return!y.isVirtual}),a=n.length,u=o.length,l=this.getStartCursor(),c=this.getEndCursor();if(u===a)return!1;if(u){var h=o[0].key,f=o[u-1].key,d=ne(r,function(y){return y.key===h})-1,p=ne(r,function(y){return y.key===f})+1,v=p<=c,g=d>=l;if((e||!g)&&v)return this.trigger("requestAppend",{key:f,nextKey:r[p].key,isVirtual:!0}),!0;if((!e||!v)&&g)return this.trigger("requestPrepend",{key:h,nextKey:r[d].key,isVirtual:!0}),!0}else if(a){var R=n[a-1];return e?this.trigger("requestAppend",{nextKey:n[0].key,isVirtual:!0}):this.trigger("requestPrepend",{nextKey:R.key,isVirtual:!0}),!0}return!1},t.setCursors=function(e,r){this.startCursor=e,this.endCursor=r},t.setSize=function(e){this.size=e},t.getStartCursor=function(){return this.startCursor},t.getEndCursor=function(){return this.endCursor},t.isLoading=function(e){var r=this.startCursor,n=this.endCursor,o=this.items,a=o[r],u=o[n],l=o.length;return!(e===Ie.END&&n>-1&&n<l-1&&!u.isVirtual&&!Fe(u.startOutline,u.endOutline)||e===Ie.START&&r>0&&!a.isVirtual&&!Fe(a.startOutline,a.endOutline))},t.setItems=function(e){this.items=e;var r={};e.forEach(function(n){r[n.key]=n}),this.itemKeys=r},t.syncItems=function(e){var r=this.items,n=this.startCursor,o=this.endCursor,a=Mr(this.items.map(function(p){return p.key}),e.map(function(p){return p.key}),n,o),u=a.startCursor,l=a.endCursor,c=l-u!==o-n||n===-1||u===-1;if(!c){var h=r.slice(n,o+1),f=e.slice(u,l+1),d=je(h,f,function(p){return p.key});c=d.added.length>0||d.removed.length>0||d.changed.length>0}return this.setItems(e),this.setCursors(u,l),c},t.getItems=function(){return this.items},t.getVisibleItems=function(){var e=this.startCursor,r=this.endCursor;return e===-1?[]:this.items.slice(e,r+1)},t.getItemByKey=function(e){return this.itemKeys[e]},t.getRenderedVisibleItems=function(){var e=this.getVisibleItems(),r=e.map(function(a){var u=a.startOutline,l=a.endOutline,c=u.length;return c===0||c!==l.length?!1:u.some(function(h,f){return l[f]!==h})}),n=r.indexOf(!0),o=r.lastIndexOf(!0);return o===-1?[]:e.slice(n,o+1)},t.destroy=function(){this.off(),this.startCursor=-1,this.endCursor=-1,this.items=[],this.size=0},s})(ve),kr=(function(i){he(s,i);function s(){var e=i!==null&&i.apply(this,arguments)||this;return e.items=[],e.container=null,e.rendererKey=0,e._updateTimer=0,e._state={},e._isItemChanged=!1,e}var t=s.prototype;return t.updateKey=function(){this.rendererKey=Date.now()},t.getItems=function(){return this.items},t.setContainer=function(e){this.container=e},t.render=function(e,r){return this.syncItems(e,r)},t.update=function(e){var r=this;e===void 0&&(e={}),this._state=m(m({},this._state),e),this.trigger("update",{state:e}),clearTimeout(this._updateTimer),this._updateTimer=window.setTimeout(function(){r.trigger("requestUpdate",{state:e})})},t.updated=function(e){var r,n;e===void 0&&(e=(n=(r=this.container)===null||r===void 0?void 0:r.children)!==null&&n!==void 0?n:[]);var o=this._diffResult,a=!!(o.added.length||o.removed.length||o.changed.length),u=this._state,l=this._isItemChanged,c=o.list;return this._isItemChanged=!1,this._state={},this.items=c,c.forEach(function(h,f){h.element=e[f]}),this.trigger("updated",{items:c,elements:Le(e),diffResult:this._diffResult,state:u,isItemChanged:l,isChanged:a}),a},t.syncItems=function(e,r){r===void 0&&(r={});var n=this.rendererKey,o=this.items,a=e.map(function(l){return m(m({},l),{renderKey:"".concat(n,"_").concat(l.key)})}),u=je(o,a,function(l){return l.renderKey});return this._isItemChanged=!!u.added.length||!!u.removed.length||!!u.changed.length,this._state=m(m({},this._state),r),this._diffResult=u,u},t.destroy=function(){this.off()},s})(ve),Nr=(function(i){he(s,i);function s(){return i!==null&&i.apply(this,arguments)||this}var t=s.prototype;return t.render=function(e,r){var n=this.container,o=i.prototype.render.call(this,e,r),a=o.prevList,u=o.removed,l=o.ordered,c=o.added,h=o.list,f=B([],a,!0);return u.forEach(function(d){f.splice(d,1),n.removeChild(a[d].element)}),l.forEach(function(d){var p,v,g=d[0],R=d[1],y=f.splice(g,1)[0];f.splice(R,0,y),n.insertBefore(y.element,(v=(p=f[R+1])===null||p===void 0?void 0:p.element)!==null&&v!==void 0?v:null)}),c.forEach(function(d){var p,v,g=h[d];f.splice(d,0,g),n.insertBefore(g.element,(v=(p=f[d+1])===null||p===void 0?void 0:p.element)!==null&&v!==void 0?v:null)}),this.updated(n.children),o},s})(kr),Ar=(function(i){he(s,i);function s(){return i!==null&&i.apply(this,arguments)||this}var t=s.prototype;return t.syncItems=function(e){var r=i.prototype.syncItems.call(this,e),n=r.added,o=r.list;return n.forEach(function(a){var u=e[a].orgItem;u.html&&!u.element&&(u.element=Gt(u.html)[0]),o[a].element=u.element}),r},s})(Nr),Kr=(function(i){he(s,i);function s(e,r){var n=i.call(this)||this;return n.wrapper=e,n.prevScrollPos=null,n.scrollOffset=0,n.contentSize=0,n._isScrollIssue=yr,n._onCheck=function(){var o=n.getScrollPos(),a=n.getOrgScrollPos();if(n.setScrollPos(a),o===null||n._isScrollIssue&&a===0||o===a){a&&(n._isScrollIssue=!1);return}n._isScrollIssue=!1,n.trigger(new ce("scroll",{direction:o<a?"end":"start",scrollPos:a,relativeScrollPos:n.getRelativeScrollPos()}))},n.options=m({container:!1,containerTag:"div",horizontal:!1,scrollContainer:null},r),n._init(),n}var t=s.prototype;return t.getWrapper=function(){return this.wrapper},t.getContainer=function(){return this.container},t.getScrollContainer=function(){return this.scrollContainer},t.getScrollOffset=function(){return this.scrollOffset},t.getContentSize=function(){return this.contentSize},t.getRelativeScrollPos=function(){return(this.prevScrollPos||0)-this.scrollOffset},t.getScrollPos=function(){return this.prevScrollPos},t.setScrollPos=function(e){this.prevScrollPos=e},t.getOrgScrollPos=function(){var e=this.eventTarget,r=this.options.horizontal,n="scroll".concat(r?"Left":"Top");return He(e)?window[r?"pageXOffset":"pageYOffset"]||document.documentElement[n]||document.body[n]:e[n]},t.setStatus=function(e){this.contentSize=e.contentSize,this.scrollOffset=e.scrollOffset,this.prevScrollPos=e.prevScrollPos,this.scrollTo(this.prevScrollPos)},t.getStatus=function(){return{contentSize:this.contentSize,scrollOffset:this.scrollOffset,prevScrollPos:this.prevScrollPos}},t.scrollTo=function(e){var r=this.eventTarget,n=this.options.horizontal,o=n?[e,0]:[0,e],a=o[0],u=o[1];He(r)?r.scroll(a,u):(r.scrollLeft=a,r.scrollTop=u)},t.scrollBy=function(e){if(e){var r=this.eventTarget,n=this.options.horizontal,o=n?[e,0]:[0,e],a=o[0],u=o[1];this.prevScrollPos+=e,He(r)?r.scrollBy(a,u):(r.scrollLeft+=a,r.scrollTop+=u)}},t.resize=function(){var e=this.scrollContainer,r=this.options.horizontal,n=e===document.body,o=n?{top:0,left:0}:e.getBoundingClientRect(),a=this.container.getBoundingClientRect();this.scrollOffset=(this.prevScrollPos||0)+(r?a.left-o.left:a.top-o.top),n?this.contentSize=r?window.innerWidth:window.innerHeight:this.contentSize=r?e.offsetWidth:e.offsetHeight},t.destroy=function(){var e=this.container;if(this.eventTarget.removeEventListener("scroll",this._onCheck),this._isCreateElement){var r=this.scrollContainer,n=document.createDocumentFragment(),o=Le(e.childNodes);r.removeChild(e),o.forEach(function(a){n.appendChild(a)}),r.appendChild(n)}else this.options.container&&(e.style.cssText=this._orgCSSText)},t._init=function(){var e,r=this.options,n=r.container,o=r.containerTag,a=r.horizontal,u=r.scrollContainer,l=this.wrapper,c=l,h=l,f="";if(!n)c=ht(u)||document.body,f=h.style.cssText;else{if(n===!0){h=document.createElement(o),h.style.position="relative",h.className=Rr;var d=Le(c.childNodes);d.forEach(function(g){h.appendChild(g)}),c.appendChild(h),this._isCreateElement=!0}else h=ht(n);f=h.style.cssText;var p=c.style;e=a?["scroll","hidden"]:["hidden","scroll"],p.overflowX=e[0],p.overflowY=e[1],a&&(h.style.height="100%")}var v=c===document.body?window:c;v.addEventListener("scroll",this._onCheck),this._orgCSSText=f,this.container=h,this.scrollContainer=c,this.eventTarget=v,this.resize(),this.setScrollPos(this.getOrgScrollPos())},s})(ve),We=(function(i){he(s,i);function s(e,r){var n=i.call(this)||this;n._waitType="",n._onScroll=function(I){var U=I.direction,S=I.scrollPos,x=I.relativeScrollPos;n._scroll(),n.trigger(new ce(Me.CHANGE_SCROLL,{direction:U,scrollPos:S,relativeScrollPos:x}))},n._onChange=function(I){n.setCursors(I.nextStartCursor,I.nextEndCursor)},n._onRendererUpdated=function(I){if(!I.isChanged){n._checkEndLoading(),n._scroll();return}var U=I.items,S=I.diffResult,x=S.added,H=S.removed,Z=S.prevList,k=S.list;H.forEach(function(O){var P=Z[O].orgItem;P.mountState!==ee.UNCHECKED&&(P.mountState=ee.UNMOUNTED)}),U.forEach(function(O){var P=O.orgItem;P.element=O.element});var M=n.options.horizontal,ae=x.map(function(O){var P=k[O].orgItem,me=P.element;if(P.type===D.VIRTUAL){var X=m({},P.cssRect),pe=P.rect;return!X.width&&pe.width&&(X.width=pe.width),!X.height&&pe.height&&(X.height=pe.height),new Ue(M,{element:me,cssRect:X})}return P}),re=n.containerManager;n.options.observeChildren&&(re.observeChildren(x.map(function(O){return k[O].element})),re.unobserveChildren(H.map(function(O){return Z[O].element})));var L=I.state,G=L.isRestore,de=L.isResize;n.itemRenderer.renderItems(ae),G&&n._onRenderComplete({mounted:x.map(function(O){return k[O].orgItem}),updated:[],isResize:!1,direction:n.defaultDirection}),(!G||de||I.isItemChanged)&&n.groupManager.renderItems()},n._onResize=function(I){if(I.isResizeContainer)n._renderItems({useResize:!0},!0);else{var U=Ot(n.getVisibleItems(),I.childEntries);U.length>0&&n.updateItems(U)}},n._onRequestAppend=function(I){n._onRequestInsert(Ie.END,Me.REQUEST_APPEND,I)},n._onRequestPrepend=function(I){n._onRequestInsert(Ie.START,Me.REQUEST_PREPEND,I)},n._onContentError=function(I){var U=I.element,S=I.target,x=I.item,H=I.update;n.trigger(new ce(Me.CONTENT_ERROR,{element:U,target:S,item:x,update:H,remove:function(){n.removeByKey(x.key)}}))},n._onRenderComplete=function(I){var U=I.isResize,S=I.mounted,x=I.updated,H=I.direction,Z=n.infinite,k=Z.getRenderedVisibleItems(),M=k.length,ae=H===Ie.END;if(n._syncInfinite(),M){var re=k[ae?0:M-1],L=Z.getItemByKey(re.key),G=ae?Math.min.apply(Math,L.startOutline)-Math.min.apply(Math,re.startOutline):Math.max.apply(Math,L.endOutline)-Math.max.apply(Math,re.endOutline);n.scrollManager.scrollBy(G)}n.trigger(new ce(Me.RENDER_COMPLETE,{isResize:U,direction:H,mounted:S.filter(function(de){return de.type!==D.LOADING}),updated:x.filter(function(de){return de.type!==D.LOADING}),startCursor:n.getStartCursor(),endCursor:n.getEndCursor(),items:n.getVisibleItems(!0),groups:n.getVisibleGroups(!0)})),n.groupManager.shouldRerenderItems()?n._update():(n._checkEndLoading(),n._scroll())},n.options=m(m(m({},n.constructor.defaultOptions),{renderer:new Ar().on("requestUpdate",function(){return n._render()})}),r);var o=n.options,a=o.gridConstructor,u=o.containerTag,l=o.container,c=o.renderer,h=o.threshold,f=o.useRecycle,d=o.scrollContainer,p=o.appliedItemChecker,v=ot(o,["gridConstructor","containerTag","container","renderer","threshold","useRecycle","scrollContainer","appliedItemChecker"]),g=v.horizontal,R=v.attributePrefix,y=v.useTransform,z=v.percentage,b=v.isConstantSize,K=v.isEqualSize,C=v.autoResize,ie=v.useResizeObserver,se=v.resizeDebounce,E=v.maxResizeDebounce,V=v.defaultDirection,_=Je(e)?document.querySelector(e):e,Q=new Kr(_,{scrollContainer:d,container:l,containerTag:u,horizontal:g}).on({scroll:n._onScroll}),j=Q.getContainer(),te=new bt(j,{horizontal:g,autoResize:C,resizeDebounce:se,maxResizeDebounce:E,useResizeObserver:ie}).on("resize",n._onResize),fe=new Mt({attributePrefix:R,horizontal:g,useTransform:y,percentage:z,isEqualSize:K,isConstantSize:b}),$=new Dr({defaultDirection:V,useRecycle:f,threshold:h}).on({change:n._onChange,requestAppend:n._onRequestAppend,requestPrepend:n._onRequestPrepend});$.setSize(Q.getContentSize());var J=new Gr(j,{appliedItemChecker:p,gridConstructor:a,externalItemRenderer:fe,externalContainerManager:te,gridOptions:v});return J.on({renderComplete:n._onRenderComplete,contentError:n._onContentError}),c.setContainer(j),c.on("updated",n._onRendererUpdated),n.itemRenderer=fe,n.groupManager=J,n.wrapperElement=_,n.scrollManager=Q,n.containerManager=te,n.infinite=$,n.containerManager.resize(),n}var t=s.prototype;return t.renderItems=function(e){return e===void 0&&(e={}),this._renderItems(e),this},t.getWrapperElement=function(){return this.scrollManager.getWrapper()},t.getScrollContainerElement=function(){return this.scrollManager.getScrollContainer()},t.getContainerElement=function(){return this.scrollManager.getContainer()},t.syncItems=function(e){return this.groupManager.syncItems(e),this._syncGroups(),this},t.setCursors=function(e,r,n){return this.groupManager.setCursors(e,r),this.infinite.setCursors(e,r),n?this._syncItems():(this._update(),this._checkEndLoading()),this},t.getStartCursor=function(){return this.infinite.getStartCursor()},t.getEndCursor=function(){return this.infinite.getEndCursor()},t.append=function(e,r){return this.insert(-1,e,r)},t.prepend=function(e,r){return this.insert(0,e,r)},t.insert=function(e,r,n){var o=this.groupManager.getGroupItems(),a=pt(r,n);return e===-1?o.push.apply(o,a):o.splice.apply(o,B([e,0],a,!1)),this.syncItems(o)},t.insertByGroupIndex=function(e,r,n){var o=this.groupManager.getGroups(),a=o[e];if(!a)return this.append(r,n);var u=this.groupManager.getGroupItems(),l=a.groupKey,c=ne(u,function(h){return h.groupKey===l});return this.insert(c,r,n)},t.getStatus=function(e,r){return{containerManager:this.containerManager.getStatus(),itemRenderer:this.itemRenderer.getStatus(),groupManager:this.groupManager.getGroupStatus(e,r),scrollManager:this.scrollManager.getStatus()}},t.setPlaceholder=function(e){return this.groupManager.setPlaceholder(e),this},t.setLoading=function(e){return this.groupManager.setLoading(e),this},t.appendPlaceholders=function(e,r){var n=this,o=this.groupManager.appendPlaceholders(e,r);return this._syncGroups(!0),m(m({},o),{remove:function(){n.removePlaceholders({groupKey:o.group.groupKey})}})},t.prependPlaceholders=function(e,r){var n=this,o=this.groupManager.prependPlaceholders(e,r);return this._syncGroups(!0),m(m({},o),{remove:function(){n.removePlaceholders({groupKey:o.group.groupKey})}})},t.removePlaceholders=function(e){this.groupManager.removePlaceholders(e),this._syncGroups(!0)},t.setStatus=function(e,r){this.itemRenderer.setStatus(e.itemRenderer),this.containerManager.setStatus(e.containerManager),this.scrollManager.setStatus(e.scrollManager);var n=this.groupManager,o=this.containerManager.getInlineSize();n.setGroupStatus(e.groupManager),this._syncInfinite(),this.infinite.setCursors(n.getStartCursor(),n.getEndCursor()),this._getRenderer().updateKey();var a={isResize:this.containerManager.getInlineSize()!==o,isRestore:!0};return r?this._syncItems(a):this._update(a),this},t.removeGroupByIndex=function(e){var r=this.getGroups();return this.removeGroupByKey(r[e].groupKey)},t.removeGroupByKey=function(e){var r=this.getItems(),n=ne(r,function(a){return a.groupKey===e}),o=Ge(r,function(a){return a.groupKey===e});return n===-1?this:(r.splice(n,o-n+1),this.syncItems(r))},t.removeByIndex=function(e){var r=this.getItems(!0);return r.splice(e,1),this.syncItems(r)},t.removeByKey=function(e){var r=this.getItems(!0),n=ne(r,function(o){return o.key===e});return this.removeByIndex(n)},t.updateItems=function(e,r){return r===void 0&&(r={}),this.groupManager.updateItems(e,r),this},t.getItems=function(e){return this.groupManager.getGroupItems(e)},t.getVisibleItems=function(e){return this.groupManager.getVisibleItems(e)},t.getRenderingItems=function(){return this.groupManager.getRenderingItems()},t.getGroups=function(e){return this.groupManager.getGroups(e)},t.getVisibleGroups=function(e){return this.groupManager.getVisibleGroups(e)},t.wait=function(e){e===void 0&&(e=Ie.END),this._waitType=e,this._checkStartLoading(e)},t.ready=function(){this._waitType=""},t.isWait=function(){return!!this._waitType},t.destroy=function(){this.off(),this._getRenderer().destroy(),this.containerManager.destroy(),this.groupManager.destroy(),this.scrollManager.destroy(),this.infinite.destroy()},t._getRenderer=function(){return this.options.renderer},t._getRendererItems=function(){return this.getRenderingItems().map(function(e){return{element:e.element,key:"".concat(e.type,"_").concat(e.key),orgItem:e}})},t._syncItems=function(e){this._getRenderer().syncItems(this._getRendererItems(),e)},t._render=function(e){this._getRenderer().render(this._getRendererItems(),e)},t._update=function(e){e===void 0&&(e={}),this._getRenderer().update(e)},t._resizeScroll=function(){var e=this.scrollManager;e.resize(),this.infinite.setSize(e.getContentSize())},t._syncGroups=function(e){var r=this.infinite,n=this.scrollManager;n.getContentSize()||this._resizeScroll(),this._syncInfinite(),this.groupManager.setCursors(r.getStartCursor(),r.getEndCursor()),e?this._update():this._render()},t._syncInfinite=function(){this.infinite.syncItems(this.getGroups(!0).map(function(e){var r=e.groupKey,n=e.grid,o=e.type,a=n.getOutlines();return{key:r,isVirtual:o===q.VIRTUAL,startOutline:a.start,endOutline:a.end}}))},t._scroll=function(){this.infinite.scroll(this.scrollManager.getRelativeScrollPos())},t._onRequestInsert=function(e,r,n){var o=this;if(this._waitType){this._checkStartLoading(this._waitType);return}this.trigger(new ce(r,{groupKey:n.key,nextGroupKey:n.nextKey,nextGroupKeys:n.nextKeys||[],isVirtual:n.isVirtual,wait:function(){o.wait(e)},ready:function(){o.ready()}}))},t._renderItems=function(e,r){if(e===void 0&&(e={}),!r&&e.useResize&&this.containerManager.resize(),this._resizeScroll(),!this.getRenderingItems().length){var n=Le(this.getContainerElement().children);return n.length>0?(this.groupManager.syncItems(pt(n)),this._syncInfinite(),this.setCursors(0,0,!0),this._getRenderer().updated()):this.infinite.scroll(0),this}return this.getVisibleGroups(!0).length?this.groupManager.renderItems(e):this.setCursors(0,0),this},t._checkStartLoading=function(e){var r=this.groupManager,n=this.infinite;!r.getLoadingType()&&n.isLoading(e)&&r.startLoading(e)&&r.hasLoadingItem()&&this._update()},t._checkEndLoading=function(){var e=this.groupManager,r=this.groupManager.getLoadingType();r&&(!this._waitType||!this.infinite.isLoading(r))&&e.endLoading()&&e.hasLoadingItem()&&this._update()},s.defaultOptions=m(m({},W),{container:!1,containerTag:"div",renderer:null,threshold:100,useRecycle:!0,scrollContainer:null,appliedItemChecker:function(){return!1}}),s.propertyTypes=Ir,s=at([Lt],s),s})(ve),Vr=(function(i){he(s,i);function s(){return i!==null&&i.apply(this,arguments)||this}return s.propertyTypes=m(m({},We.propertyTypes),Be.propertyTypes),s.defaultOptions=m(m(m({},We.defaultOptions),Be.defaultOptions),{gridConstructor:Be,appliedItemChecker:function(t,e){var r=parseFloat(t.attributes.column)||0;return r>=e.outlineLength}}),s=at([Lt],s),s})(We);let tt=[];function ut(){Ur(),document.querySelectorAll(".masonry-holder").forEach(s=>{if(!s.dataset.gridInitialized){const t=window.innerWidth>1600?56:28,e=new Vr(s,{gap:t});e.renderItems(),s.dataset.gridInitialized="true",tt.push({element:s,instance:e})}})}function Ur(){tt.forEach(i=>{i.instance&&typeof i.instance.destroy=="function"&&(i.instance.destroy(),i.element&&delete i.element.dataset.gridInitialized)}),tt=[]}window.addEventListener("resize",function(){clearTimeout(window.resizeTimeout),window.resizeTimeout=setTimeout(()=>{ut()},250)});const jr=new MutationObserver(i=>{i.some(t=>Array.from(t.addedNodes).some(e=>e.nodeType===1&&(e.classList?.contains("masonry-holder")||e.querySelector?.(".masonry-holder"))))&&ut()});jr.observe(document.body,{childList:!0,subtree:!0});ut();
